<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>Database (Permazen 5.2.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: io.permazen.core, class: Database">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Database.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.permazen.core</a></div>
<h1 title="Class Database" class="title">Class Database</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.permazen.core.Database</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">Database</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Provides an object database abstraction on top of a key/value database.

 <p>
 Includes support for:
 <ul>
  <li>Objects and fields defined by a <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a>, with positive schema verification</li>
  <li>Simple value fields containing any standard or custom type that has an <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a></li>
  <li>Invertable reference fields with referential integrity and configurable delete cascading</li>
  <li>Lockless counter fields</li>
  <li>Complex fields of type <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link"><code>List</code></a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableSet.html" title="class or interface in java.util" class="external-link"><code>NavigableSet</code></a>, and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableMap.html" title="class or interface in java.util" class="external-link"><code>NavigableMap</code></a></li>
  <li>Configurable indexing of any simple field or complex sub-field</li>
  <li>Composite indexes on multiple simple fields</li>
  <li>Notification of object creation and deletion</li>
  <li>Notification of object field changes, as seen through an arbitrary path of references</li>
  <li>Automatic schema tracking and migration with notification support</li>
 </ul>

 <p>
 See <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> for further details on the above functionality.

 <p>
 This class defines an abstraction layer that usually sits below a <a href="../Permazen.html" title="class in io.permazen"><code>Permazen</code></a> but is completely
 independent of <a href="../Permazen.html" title="class in io.permazen"><code>Permazen</code></a> and can be used on its own.
 Compared to <a href="../Permazen.html" title="class in io.permazen"><code>Permazen</code></a>, a <a href="Database.html" title="class in io.permazen.core"><code>Database</code></a> has these differences:
 <ul>
  <li>A <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> must be explicitly provided to define the schema in use, whereas when using a
      <a href="../Permazen.html" title="class in io.permazen"><code>Permazen</code></a> the schema is derived automatically from annotated Java model classes.</li>
  <li>Simple fields are encoded/decoded into <code>byte[]</code> arrays using an <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a> which defines
      the field's "type".</li>
  <li>References from one object to another are represented by <a href="ObjId.html" title="class in io.permazen.core"><code>ObjId</code></a>s and encoded/decoded using
      <a href="ReferenceEncoding.html" title="class in io.permazen.core"><code>ReferenceEncoding</code></a>.</li>
  <li>There is no explicit notion of object sub-types, i.e., the object type hierarchy is completely flat.
      However, object types can share the same field definitions, and reference fields can be restricted
      to only refer to certain other object types.</li>
  <li>There is no automatic validation support.</li>
 </ul>

 <p>
 <b>Schema Tracking</b>

 <p>
 Within each <a href="Database.html" title="class in io.permazen.core"><code>Database</code></a> is stored a record of all schemas used with that database (termed the "schema bundle").
 When creating a new transaction, the caller provides a <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> to use for accessing objects in the transaction.
 If the schema is not already registered in the database, it is automatically registered if at the start of the transaction
 assuming <a href="TransactionConfig.html#isAllowNewSchema()"><code>TransactionConfig.isAllowNewSchema()</code></a> is true (otherwise a <a href="SchemaMismatchException.html" title="class in io.permazen.core"><code>SchemaMismatchException</code></a> is thrown).

 <p>
 Transactions can be opened with an <a href="../schema/SchemaModel.html#isEmpty()">empty</a> <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> when no particular schema
 is needed. In any case, the empty <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> is never recorded in a database.

 <p>
 <b>Schema Migration</b>

 <p>
 Each object in a <a href="Database.html" title="class in io.permazen.core"><code>Database</code></a> is associated with an <a href="ObjType.html" title="class in io.permazen.core"><code>object type</code></a> in one of the registered schemas;
 this dictates which fields the object contains, how they are indexed, etc. Newly created objects are always defined
 in terms of the transaction's configured schema, but it's also possible to access objects that were created
 in previous transactions under different schemas.

 <p>
 When an object is accessed during a <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a>, if the object's schema is not the transaction's configured
 schema, then (if requested) the object will be automatically migrated to the transaction's schema if the object's type
 still exists (otherwise a <a href="TypeNotInSchemaException.html" title="class in io.permazen.core"><code>TypeNotInSchemaException</code></a> is thrown).

 <p>
 Object migration involves the following steps:
 <ul>
  <li>Fields that exist in the old schema but not in the current schema are removed.</li>
  <li>Fields that exist in the current schema but not in the old schema are initialized to their default values.</li>
  <li>For fields that are common to both the old and the new schema:</li>
  <ul>
      <li>If the two field's <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a>s are the same, the value is not changed
      <li>Otherwise, the field's old value is converted to the new <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a>, if possible,
          via <a href="../encoding/Encoding.html#convert(io.permazen.encoding.Encoding,S)"><code>Encoding.convert()</code></a>.
      <li>Otherwise, the field is reset to its default value.
  </ul>
  <li>Any <a href="SchemaChangeListener.html" title="interface in io.permazen.core"><code>SchemaChangeListener</code></a>s registered with the <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> are notified.</li>
 </ul>

 <p>
 Object type and field identity is based on names. So when comparing across schemas,
 two object types or fields are assumed to be "the same" if they have the same name.

 <p>
 Indexes may be added and removed across different schemas without losing information, however,
 indexes will only contain those objects whose schema includes the index. In other words, it's not
 possible to find an object using an index that was added after the object was created until the object
 is migrated to a newer schema. The same principle applies to other schema-defined behavior, for example,
 the <a href="DeleteAction.html" title="enum class in io.permazen.core"><code>DeleteAction</code></a> taken when a referenced object is deleted depends on the <a href="DeleteAction.html" title="enum class in io.permazen.core"><code>DeleteAction</code></a>
 configured in the schema of the object containing the reference.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a></li>
<li><a href="../package-summary.html"><code>io.permazen</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#MAX_INDEXED_FIELDS" class="member-name-link">MAX_INDEXED_FIELDS</a></code></div>
<div class="col-last even-row-color">
<div class="block">The maximum number of fields that may be indexed in a composite index (4).</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(io.permazen.kv.KVDatabase)" class="member-name-link">Database</a><wbr>(<a href="../kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a>&nbsp;kvdb)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DetachedTransaction.html" title="class in io.permazen.core">DetachedTransaction</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createDetachedTransaction(io.permazen.kv.KVStore,io.permazen.core.TransactionConfig)" class="member-name-link">createDetachedTransaction</a><wbr>(<a href="../kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a>&nbsp;kvstore,
 <a href="TransactionConfig.html" title="class in io.permazen.core">TransactionConfig</a>&nbsp;txConfig)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a detached transaction based on the provided key/value store.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Transaction.html" title="class in io.permazen.core">Transaction</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTransaction(io.permazen.core.TransactionConfig)" class="member-name-link">createTransaction</a><wbr>(<a href="TransactionConfig.html" title="class in io.permazen.core">TransactionConfig</a>&nbsp;txConfig)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> on this database using the specific configuration.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Transaction.html" title="class in io.permazen.core">Transaction</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTransaction(io.permazen.kv.KVTransaction,io.permazen.core.TransactionConfig)" class="member-name-link">createTransaction</a><wbr>(<a href="../kv/KVTransaction.html" title="interface in io.permazen.kv">KVTransaction</a>&nbsp;kvt,
 <a href="TransactionConfig.html" title="class in io.permazen.core">TransactionConfig</a>&nbsp;txConfig)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> on this database using an already-opened <a href="../kv/KVTransaction.html" title="interface in io.permazen.kv"><code>KVTransaction</code></a> and specified
 configuration.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Transaction.html" title="class in io.permazen.core">Transaction</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTransaction(io.permazen.schema.SchemaModel)" class="member-name-link">createTransaction</a><wbr>(<a href="../schema/SchemaModel.html" title="class in io.permazen.schema">SchemaModel</a>&nbsp;schemaModel)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> on this database using the given <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a>
 and the defaults for all other <a href="TransactionConfig.html" title="class in io.permazen.core"><code>TransactionConfig</code></a> items.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding">EncodingRegistry</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEncodingRegistry()" class="member-name-link">getEncodingRegistry</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a> associated with this instance.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getKVDatabase()" class="member-name-link">getKVDatabase</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the <a href="../kv/KVDatabase.html" title="interface in io.permazen.kv"><code>KVDatabase</code></a> underlying this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setEncodingRegistry(io.permazen.encoding.EncodingRegistry)" class="member-name-link">setEncodingRegistry</a><wbr>(<a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding">EncodingRegistry</a>&nbsp;encodingRegistry)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a> associated with this instance.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="MAX_INDEXED_FIELDS">
<h3>MAX_INDEXED_FIELDS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAX_INDEXED_FIELDS</span></div>
<div class="block">The maximum number of fields that may be indexed in a composite index (4).</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../constant-values.html#io.permazen.core.Database.MAX_INDEXED_FIELDS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(io.permazen.kv.KVDatabase)">
<h3>Database</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Database</span><wbr><span class="parameters">(<a href="../kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a>&nbsp;kvdb)</span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>kvdb</code> - the underlying key/value store in which to store information</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>kvdb</code> is null</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getEncodingRegistry()">
<h3>getEncodingRegistry</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding">EncodingRegistry</a></span>&nbsp;<span class="element-name">getEncodingRegistry</span>()</div>
<div class="block">Get the <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a> associated with this instance.

 <p>
 By default a <a href="../encoding/DefaultEncodingRegistry.html" title="class in io.permazen.encoding"><code>DefaultEncodingRegistry</code></a> is automatically created.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>encoding registry associated with this instance</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setEncodingRegistry(io.permazen.encoding.EncodingRegistry)">
<h3>setEncodingRegistry</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setEncodingRegistry</span><wbr><span class="parameters">(<a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding">EncodingRegistry</a>&nbsp;encodingRegistry)</span></div>
<div class="block">Set the <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a> associated with this instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>encodingRegistry</code> - encoding registry to associate with this instance</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>encodingRegistry</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getKVDatabase()">
<h3>getKVDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></span>&nbsp;<span class="element-name">getKVDatabase</span>()</div>
<div class="block">Get the <a href="../kv/KVDatabase.html" title="interface in io.permazen.kv"><code>KVDatabase</code></a> underlying this instance.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>underlying key/value database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createTransaction(io.permazen.schema.SchemaModel)">
<h3>createTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Transaction.html" title="class in io.permazen.core">Transaction</a></span>&nbsp;<span class="element-name">createTransaction</span><wbr><span class="parameters">(<a href="../schema/SchemaModel.html" title="class in io.permazen.schema">SchemaModel</a>&nbsp;schemaModel)</span></div>
<div class="block">Create a new <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> on this database using the given <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a>
 and the defaults for all other <a href="TransactionConfig.html" title="class in io.permazen.core"><code>TransactionConfig</code></a> items.

 <p>
 Equivalent to: <a href="#createTransaction(io.permazen.core.TransactionConfig)"><code>createTransaction</code></a><code>
  (TransactionConfig.builder().schemaModel(schemaModel).build())</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>schemaModel</code> - schema model</dd>
<dt>Returns:</dt>
<dd>newly created transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="InvalidSchemaException.html" title="class in io.permazen.core">InvalidSchemaException</a></code> - if the configured schema is invalid (i.e., does not pass validation checks)</dd>
<dd><code><a href="SchemaMismatchException.html" title="class in io.permazen.core">SchemaMismatchException</a></code> - if the configured <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> has any explicit storage ID assignments
  that conflict with storage ID assignments already recorded in the database</dd>
<dd><code><a href="InconsistentDatabaseException.html" title="class in io.permazen.core">InconsistentDatabaseException</a></code> - if inconsistent or invalid meta-data is detected in the database</dd>
<dd><code><a href="InconsistentDatabaseException.html" title="class in io.permazen.core">InconsistentDatabaseException</a></code> - if an uninitialized database is encountered but the database is not empty</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>schemaModel</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createTransaction(io.permazen.core.TransactionConfig)">
<h3>createTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Transaction.html" title="class in io.permazen.core">Transaction</a></span>&nbsp;<span class="element-name">createTransaction</span><wbr><span class="parameters">(<a href="TransactionConfig.html" title="class in io.permazen.core">TransactionConfig</a>&nbsp;txConfig)</span></div>
<div class="block">Create a new <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> on this database using the specific configuration.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>txConfig</code> - transaction configuration</dd>
<dt>Returns:</dt>
<dd>newly created transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="InvalidSchemaException.html" title="class in io.permazen.core">InvalidSchemaException</a></code> - if the configured schema is invalid (i.e., does not pass validation checks)</dd>
<dd><code><a href="SchemaMismatchException.html" title="class in io.permazen.core">SchemaMismatchException</a></code> - if the configured schema is not registered in the database and
  <a href="TransactionConfig.html#isAllowNewSchema()"><code>TransactionConfig.isAllowNewSchema()</code></a> is false</dd>
<dd><code><a href="SchemaMismatchException.html" title="class in io.permazen.core">SchemaMismatchException</a></code> - if the configured <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> has any explicit storage ID assignments
  that conflict with storage ID assignments already recorded in the database</dd>
<dd><code><a href="InconsistentDatabaseException.html" title="class in io.permazen.core">InconsistentDatabaseException</a></code> - if inconsistent or invalid meta-data is detected in the database</dd>
<dd><code><a href="InconsistentDatabaseException.html" title="class in io.permazen.core">InconsistentDatabaseException</a></code> - if an uninitialized database is encountered but the database is not empty</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>txConfig</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createTransaction(io.permazen.kv.KVTransaction,io.permazen.core.TransactionConfig)">
<h3>createTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Transaction.html" title="class in io.permazen.core">Transaction</a></span>&nbsp;<span class="element-name">createTransaction</span><wbr><span class="parameters">(<a href="../kv/KVTransaction.html" title="interface in io.permazen.kv">KVTransaction</a>&nbsp;kvt,
 <a href="TransactionConfig.html" title="class in io.permazen.core">TransactionConfig</a>&nbsp;txConfig)</span></div>
<div class="block">Create a new <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a> on this database using an already-opened <a href="../kv/KVTransaction.html" title="interface in io.permazen.kv"><code>KVTransaction</code></a> and specified
 configuration.

 <p>
 The given <a href="../kv/KVTransaction.html" title="interface in io.permazen.kv"><code>KVTransaction</code></a> will be committed or rolled-back along with the returned <a href="Transaction.html" title="class in io.permazen.core"><code>Transaction</code></a>.

 <p>
 See <a href="#createTransaction(io.permazen.core.TransactionConfig)"><code>createTransaction(TransactionConfig)</code></a> for further details.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>kvt</code> - already opened key/value store transaction</dd>
<dd><code>txConfig</code> - transaction configuration</dd>
<dt>Returns:</dt>
<dd>newly created transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>kvt</code> or <code>txConfig</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createDetachedTransaction(io.permazen.kv.KVStore,io.permazen.core.TransactionConfig)">
<h3>createDetachedTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DetachedTransaction.html" title="class in io.permazen.core">DetachedTransaction</a></span>&nbsp;<span class="element-name">createDetachedTransaction</span><wbr><span class="parameters">(<a href="../kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a>&nbsp;kvstore,
 <a href="TransactionConfig.html" title="class in io.permazen.core">TransactionConfig</a>&nbsp;txConfig)</span></div>
<div class="block">Create a detached transaction based on the provided key/value store.

 <p>
 The key/value store will be initialized if necessary (i.e., <code>kvstore</code> may be empty), otherwise it will be
 validated against the schema information associated with this instance.

 <p>
 The returned <a href="DetachedTransaction.html" title="class in io.permazen.core"><code>DetachedTransaction</code></a> does not support <a href="DetachedTransaction.html#commit()"><code>commit()</code></a> or
 <a href="DetachedTransaction.html#rollback()"><code>rollback()</code></a> and can be used indefinitely.
 It does support <a href="DetachedTransaction.html#addCallback(io.permazen.core.Transaction.Callback)"><code>addCallback()</code></a> but that method has no effect because
 the transaction cannot be committed.

 <p>
 <a href="DetachedTransaction.html" title="class in io.permazen.core"><code>DetachedTransaction</code></a>'s do implement <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link"><code>Closeable</code></a>; if th<code>kvstore</code> is a <a href="../kv/CloseableKVStore.html" title="interface in io.permazen.kv"><code>CloseableKVStore</code></a>,
 then it will be <a href="../kv/CloseableKVStore.html#close()"><code>close()</code></a>'d if/when the returned <a href="DetachedTransaction.html" title="class in io.permazen.core"><code>DetachedTransaction</code></a> is.

 <p>
 See <a href="#createTransaction(io.permazen.core.TransactionConfig)"><code>createTransaction(TransactionConfig)</code></a> for further details.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>kvstore</code> - key/value store, empty or having content compatible with this transaction's <a href="Database.html" title="class in io.permazen.core"><code>Database</code></a></dd>
<dd><code>txConfig</code> - transaction configuration</dd>
<dt>Returns:</dt>
<dd>detached transaction based on <code>kvstore</code></dd>
<dt>Throws:</dt>
<dd><code><a href="InvalidSchemaException.html" title="class in io.permazen.core">InvalidSchemaException</a></code> - if the configured schema is invalid (i.e., does not pass validation checks)</dd>
<dd><code><a href="SchemaMismatchException.html" title="class in io.permazen.core">SchemaMismatchException</a></code> - if the configured <a href="../schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> has any explicit storage ID assignments
  that conflict with storage ID assignments already recorded in the database</dd>
<dd><code><a href="InconsistentDatabaseException.html" title="class in io.permazen.core">InconsistentDatabaseException</a></code> - if inconsistent or invalid meta-data is detected in the database</dd>
<dd><code><a href="InconsistentDatabaseException.html" title="class in io.permazen.core">InconsistentDatabaseException</a></code> - if an uninitialized database is encountered but the database is not empty</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>kvstore</code> or <code>txConfig</code> is null</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
