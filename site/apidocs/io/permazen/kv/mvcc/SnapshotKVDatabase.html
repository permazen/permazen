<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SnapshotKVDatabase (Permazen 4.1.9-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SnapshotKVDatabase (Permazen 4.1.9-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SnapshotKVDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/permazen/kv/mvcc/ReadWriteConflict.html" title="class in io.permazen.kv.mvcc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/permazen/kv/mvcc/SnapshotKVDatabase.html" target="_top">Frames</a></li>
<li><a href="SnapshotKVDatabase.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.permazen.kv.mvcc</div>
<h2 title="Class SnapshotKVDatabase" class="title">Class SnapshotKVDatabase</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>io.permazen.kv.mvcc.SnapshotKVDatabase</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../io/permazen/kv/array/ArrayKVDatabase.html" title="class in io.permazen.kv.array">ArrayKVDatabase</a>, <a href="../../../../io/permazen/kv/leveldb/LevelDBKVDatabase.html" title="class in io.permazen.kv.leveldb">LevelDBKVDatabase</a>, <a href="../../../../io/permazen/kv/mvstore/MVStoreKVDatabase.html" title="class in io.permazen.kv.mvstore">MVStoreKVDatabase</a>, <a href="../../../../io/permazen/kv/rocksdb/RocksDBKVDatabase.html" title="class in io.permazen.kv.rocksdb">RocksDBKVDatabase</a></dd>
</dl>
<hr>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/concurrent.ThreadSafe.html?is-external=true" title="class or interface in javax.annotation">@ThreadSafe</a>
public abstract class <span class="typeNameLabel">SnapshotKVDatabase</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></pre>
<div class="block"><a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv"><code>KVDatabase</code></a> implementation based on an underlying <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc"><code>AtomicKVStore</code></a> that uses
 <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#snapshot--">snapshot</a> views and optimistic locking to provide concurrent
 transactions and linearizable ACID consistency.

 <p>
 Instances implement a simple optimistic locking scheme for MVCC using <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#snapshot--"><code>AtomicKVStore.snapshot()</code></a>. Concurrent transactions
 do not contend for any locks until commit time. During each transaction, reads are noted and derive from the snapshot,
 while writes are batched up. At commit time, if any other transaction has committed writes since the transaction's
 snapshot was created, and any of those writes <a href="../../../../io/permazen/kv/mvcc/Reads.html#isConflict-io.permazen.kv.mvcc.Mutations-">conflict</a> with any of the committing
 transaction's reads, a <a href="../../../../io/permazen/kv/RetryTransactionException.html" title="class in io.permazen.kv"><code>RetryTransactionException</code></a> is thrown. Otherwise, the transaction is committed and its
 writes are applied.

 <p>
 Each outstanding transaction's mutations are batched up in memory using a <a href="../../../../io/permazen/kv/mvcc/Writes.html" title="class in io.permazen.kv.mvcc"><code>Writes</code></a> instance. Therefore,
 the transaction load supported by this class is limited to what can fit in memory.

 <p>
 <a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html#watchKey-byte:A-">Key watches</a> are supported.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../io/permazen/kv/mvcc/AtomicKVDatabase.html" title="class in io.permazen.kv.mvcc"><code>AtomicKVDatabase</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://www.slf4j.org/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j">Logger</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#log">log</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#SnapshotKVDatabase--">SnapshotKVDatabase</a></span>()</code>
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#SnapshotKVDatabase-io.permazen.kv.mvcc.AtomicKVStore-">SnapshotKVDatabase</a></span>(<a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a>&nbsp;kvstore)</code>
<div class="block">Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#closeTransactions--">closeTransactions</a></span>()</code>
<div class="block">Forcibly fail all outstanding transactions due to <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#stop--"><code>stop()</code></a> being invoked.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#createSnapshotKVTransaction-io.permazen.kv.mvcc.MutableView-long-">createSnapshotKVTransaction</a></span>(<a href="../../../../io/permazen/kv/mvcc/MutableView.html" title="class in io.permazen.kv.mvcc">MutableView</a>&nbsp;view,
                           long&nbsp;baseVersion)</code>
<div class="block">Instantiate a new <a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc"><code>SnapshotKVTransaction</code></a> instance.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#createTransaction--">createTransaction</a></span>()</code>
<div class="block">Create a new transaction.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#createTransaction-java.util.Map-">createTransaction</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,?&gt;&nbsp;options)</code>
<div class="block">Create a new transaction with the specified options.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#getCurrentVersion--">getCurrentVersion</a></span>()</code>
<div class="block">Get the current MVCC version number.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#getKVStore--">getKVStore</a></span>()</code>
<div class="block">Get the underlying <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc"><code>AtomicKVStore</code></a>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../io/permazen/kv/KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#logException-io.permazen.kv.KVTransactionException-">logException</a></span>(<a href="../../../../io/permazen/kv/KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a>&nbsp;e)</code>
<div class="block">Log specified exception.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#setKVStore-io.permazen.kv.mvcc.AtomicKVStore-">setKVStore</a></span>(<a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a>&nbsp;kvstore)</code>
<div class="block">Configure the underlying <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc"><code>AtomicKVStore</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#start--">start</a></span>()</code>
<div class="block">Start this instance.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#stop--">stop</a></span>()</code>
<div class="block">Stop this instance.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang">RuntimeException</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#wrapException-io.permazen.kv.mvcc.SnapshotKVTransaction-java.lang.RuntimeException-">wrapException</a></span>(<a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a>&nbsp;tx,
             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang">RuntimeException</a>&nbsp;e)</code>
<div class="block">Wrap a <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang"><code>RuntimeException</code></a> as needed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected final&nbsp;<a href="https://www.slf4j.org/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j">Logger</a> log</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SnapshotKVDatabase--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SnapshotKVDatabase</h4>
<pre>public&nbsp;SnapshotKVDatabase()</pre>
<div class="block">Default constructor.

 <p>
 The underlying key/value store must still be configured before starting this instance.</div>
</li>
</ul>
<a name="SnapshotKVDatabase-io.permazen.kv.mvcc.AtomicKVStore-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SnapshotKVDatabase</h4>
<pre>public&nbsp;SnapshotKVDatabase(<a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a>&nbsp;kvstore)</pre>
<div class="block">Constructor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kvstore</code> - underlying key/value store</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getKVStore--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKVStore</h4>
<pre>protected&nbsp;<a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a>&nbsp;getKVStore()</pre>
<div class="block">Get the underlying <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc"><code>AtomicKVStore</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>underlying key/value store</dd>
</dl>
</li>
</ul>
<a name="setKVStore-io.permazen.kv.mvcc.AtomicKVStore-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKVStore</h4>
<pre>protected&nbsp;void&nbsp;setKVStore(<a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a>&nbsp;kvstore)</pre>
<div class="block">Configure the underlying <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc"><code>AtomicKVStore</code></a>.

 <p>
 Required property; must be configured before <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#start--"><code>start()</code></a>ing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>kvstore</code> - underlying key/value store</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd>
</dl>
</li>
</ul>
<a name="getCurrentVersion--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentVersion</h4>
<pre>public&nbsp;long&nbsp;getCurrentVersion()</pre>
<div class="block">Get the current MVCC version number.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>MVCC database version number</dd>
</dl>
</li>
</ul>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/PostConstruct.html?is-external=true" title="class or interface in javax.annotation">@PostConstruct</a>
public&nbsp;void&nbsp;start()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html#start--">KVDatabase</a></code></span></div>
<div class="block">Start this instance. This method must be called prior to creating any transactions.

 <p>
 This method is idempotent: if this instance is already started, nothing happens.

 <p>
 Whether an instance that has been started and stopped can be restarted is implementation-dependent.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVDatabase.html#start--">start</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
</dl>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/PreDestroy.html?is-external=true" title="class or interface in javax.annotation">@PreDestroy</a>
public&nbsp;void&nbsp;stop()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html#stop--">KVDatabase</a></code></span></div>
<div class="block">Stop this instance.

 <p>
 This method is idempotent: if this instance has not been started, or is already stopped, nothing happens.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVDatabase.html#stop--">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
</dl>
</li>
</ul>
<a name="createTransaction-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransaction</h4>
<pre>public&nbsp;<a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a>&nbsp;createTransaction(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,?&gt;&nbsp;options)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html#createTransaction-java.util.Map-">KVDatabase</a></code></span></div>
<div class="block">Create a new transaction with the specified options.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVDatabase.html#createTransaction-java.util.Map-">createTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>options</code> - optional transaction options; may be null</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>newly created transaction</dd>
</dl>
</li>
</ul>
<a name="createTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransaction</h4>
<pre>public&nbsp;<a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a>&nbsp;createTransaction()</pre>
<div class="block">Create a new transaction.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVDatabase.html#createTransaction--">createTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>newly created transaction</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if not <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#start--"><code>start()</code></a>ed or <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#stop--"><code>stop()</code></a>ing</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="createSnapshotKVTransaction-io.permazen.kv.mvcc.MutableView-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSnapshotKVTransaction</h4>
<pre>protected&nbsp;<a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a>&nbsp;createSnapshotKVTransaction(<a href="../../../../io/permazen/kv/mvcc/MutableView.html" title="class in io.permazen.kv.mvcc">MutableView</a>&nbsp;view,
                                                            long&nbsp;baseVersion)</pre>
<div class="block">Instantiate a new <a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc"><code>SnapshotKVTransaction</code></a> instance.

 <p>
 The implementation in <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html" title="class in io.permazen.kv.mvcc"><code>SnapshotKVDatabase</code></a> just invokes the <a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc"><code>SnapshotKVTransaction</code></a>
 constructor using <code>this</code>. Subclasses may want to override this method to create a more specific subclass.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>view</code> - mutable view to be used for this transaction</dd>
<dd><code>baseVersion</code> - the database version associated with <code>base</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>new transaction instance</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a name="closeTransactions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeTransactions</h4>
<pre>protected&nbsp;void&nbsp;closeTransactions()</pre>
<div class="block">Forcibly fail all outstanding transactions due to <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html#stop--"><code>stop()</code></a> being invoked.

 <p>
 Can be used by subclasses during the shutdown sequence to ensure everything is properly cleaned up.</div>
</li>
</ul>
<a name="logException-io.permazen.kv.KVTransactionException-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logException</h4>
<pre>protected&nbsp;<a href="../../../../io/permazen/kv/KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a>&nbsp;logException(<a href="../../../../io/permazen/kv/KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a>&nbsp;e)</pre>
<div class="block">Log specified exception. Used to ensure exceptions are logged at the point they are thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - exception to log</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>e</dd>
</dl>
</li>
</ul>
<a name="wrapException-io.permazen.kv.mvcc.SnapshotKVTransaction-java.lang.RuntimeException-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>wrapException</h4>
<pre>protected&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang">RuntimeException</a>&nbsp;wrapException(<a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc">SnapshotKVTransaction</a>&nbsp;tx,
                                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang">RuntimeException</a>&nbsp;e)</pre>
<div class="block">Wrap a <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang"><code>RuntimeException</code></a> as needed.

 <p>
 The implementation in <a href="../../../../io/permazen/kv/mvcc/SnapshotKVDatabase.html" title="class in io.permazen.kv.mvcc"><code>SnapshotKVDatabase</code></a> just returns <code>e</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tx</code> - transaction in which the exception occurred</dd>
<dd><code>e</code> - original exception</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>wrapped exception, or just <code>e</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SnapshotKVDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/permazen/kv/mvcc/ReadWriteConflict.html" title="class in io.permazen.kv.mvcc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../io/permazen/kv/mvcc/SnapshotKVTransaction.html" title="class in io.permazen.kv.mvcc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/permazen/kv/mvcc/SnapshotKVDatabase.html" target="_top">Frames</a></li>
<li><a href="SnapshotKVDatabase.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2022. All rights reserved.</small></p>
</body>
</html>
