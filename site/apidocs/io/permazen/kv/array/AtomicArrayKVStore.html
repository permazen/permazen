<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AtomicArrayKVStore (Permazen 4.1.9-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AtomicArrayKVStore (Permazen 4.1.9-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AtomicArrayKVStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/permazen/kv/array/ArrayKVWriter.html" title="class in io.permazen.kv.array"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/permazen/kv/array/AtomicArrayKVStore.html" target="_top">Frames</a></li>
<li><a href="AtomicArrayKVStore.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.permazen.kv.array</div>
<h2 title="Class AtomicArrayKVStore" class="title">Class AtomicArrayKVStore</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">io.permazen.kv.AbstractKVStore</a></li>
<li>
<ul class="inheritance">
<li>io.permazen.kv.array.AtomicArrayKVStore</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a>, <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></dd>
</dl>
<hr>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/concurrent.ThreadSafe.html?is-external=true" title="class or interface in javax.annotation">@ThreadSafe</a>
public class <span class="typeNameLabel">AtomicArrayKVStore</span>
extends <a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a>
implements <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></pre>
<div class="block"><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc"><code>AtomicKVStore</code></a> based on <a href="../../../../io/permazen/kv/array/ArrayKVStore.html" title="class in io.permazen.kv.array"><code>ArrayKVStore</code></a> plus a write-ahead log and background compaction.

 <p>
 This implementation is designed to maximize the speed of reads and minimize the amount of memory overhead per key/value pair.
 It is optimized for relatively infrequent writes.

 <p>
 A (read-only) <a href="../../../../io/permazen/kv/array/ArrayKVStore.html" title="class in io.permazen.kv.array"><code>ArrayKVStore</code></a> is the basis for the database; the array files are mapped into memory. As mutations are
 applied, they are added to an in-memory change set, and appended to a mutation log file for persistence. On restart,
 the mutation log file (if any) is read to reconstruct the in-memory change set.

 <p>
 <b>Compaction</b>

 <p>
 Instances periodically compact outstanding changes into new array files (and truncate the mutation log file) in a background
 thread. A compaction is scheduled whenever:
  <ul>
  <li>The size of mutation log file exceeds the <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setCompactLowWater-int-">compaction space low-water mark</a></li>
  <li>The oldest uncompacted modification is older than the <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setCompactMaxDelay-int-">compaction maximum delay</a></li>
  <li>The <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#scheduleCompaction--"><code>scheduleCompaction()</code></a> method is invoked</li>
  </ul>

 <p>
 In order to prevent compaction from getting hopelessly behind when there is high write volume, a
 <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setCompactHighWater-int-">compaction space high-water mark</a> is also used. When the size of the mutation log file
 exceeds the half-way point between the low-water and high-water marks, new write attempts start being artificially delayed,
 and this delay amount <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#calculateCompactionPressureDelay-float-">increases to infinity</a> as the high-water mark is approached,
 so that as long as the high-water mark is exceeded, new writes are blocked completely until the current compaction cycle
 completes. Use <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#getTotalMillisWaiting--"><code>getTotalMillisWaiting()</code></a> to asses the total amount of time spent in these artificial delays.

 <p>
 The number of bytes occupied by the in-memory change set and the length of the outstanding mutations log file are
 related. Therefore, the compaction high-water mark loosely correlates to a maximum amount of memory required
 by the in-memory change set.

 <p>
 <b>Hot Backups</b>

 <p>
 "Hot" backups may be created in parallel with normal operation via <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#hotCopy-java.io.File-"><code>hotCopy()</code></a>.
 Hard links are used to make this operation fast; only the mutation log file (if any) is actually copied.

 <p>
 The <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setDirectory-java.io.File-">database directory</a> is a required configuration property.

 <p>
 Key and value data must not exceed 2GB (each separately).

 <p>
 Instances may be stopped and (re)started multiple times.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://en.wikipedia.org/wiki/Write-ahead_logging">Write-ahead logging</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#DEFAULT_COMPACTION_HIGH_WATER">DEFAULT_COMPACTION_HIGH_WATER</a></span></code>
<div class="block">Default compaction space high-water mark in bytes (1073741824 bytes).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#DEFAULT_COMPACTION_LOW_WATER">DEFAULT_COMPACTION_LOW_WATER</a></span></code>
<div class="block">Default compaction space low-water mark in bytes (65536 bytes).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#DEFAULT_COMPACTION_MAX_DELAY">DEFAULT_COMPACTION_MAX_DELAY</a></span></code>
<div class="block">Default compaction maximum delay in seconds (86400 seconds).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#AtomicArrayKVStore--">AtomicArrayKVStore</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#adjustCounter-byte:A-long-">adjustCounter</a></span>(byte[]&nbsp;key,
             long&nbsp;amount)</code>
<div class="block">Adjust the counter at the given key by the given amount.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#apply-io.permazen.kv.mvcc.Mutations-">apply</a></span>(<a href="../../../../io/permazen/kv/mvcc/Mutations.html" title="interface in io.permazen.kv.mvcc">Mutations</a>&nbsp;mutations)</code>
<div class="block">Apply all the given <a href="../../../../io/permazen/kv/mvcc/Mutations.html" title="interface in io.permazen.kv.mvcc"><code>Mutations</code></a> to this instance.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#calculateCompactionPressureDelay-float-">calculateCompactionPressureDelay</a></span>(float&nbsp;windowRatio)</code>
<div class="block">Calculate the maximum amount of time that a thread attempting to <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#mutate-io.permazen.kv.mvcc.Mutations-boolean-"><code>mutate()</code></a> must wait
 for a background compaction to complete as we start nearing the high water mark.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#decodeCounter-byte:A-">decodeCounter</a></span>(byte[]&nbsp;bytes)</code>
<div class="block">Decode a counter value previously encoded by <a href="../../../../io/permazen/kv/KVStore.html#encodeCounter-long-"><code>encodeCounter()</code></a>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#encodeCounter-long-">encodeCounter</a></span>(long&nbsp;value)</code>
<div class="block">Encode a counter value into a <code>byte[]</code> value suitable for use with <a href="../../../../io/permazen/kv/KVStore.html#decodeCounter-byte:A-"><code>decodeCounter()</code></a>
 and/or <a href="../../../../io/permazen/kv/KVStore.html#adjustCounter-byte:A-long-"><code>adjustCounter()</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#finalize--">finalize</a></span>()</code>
<div class="block">Finalize this instance.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#get-byte:A-">get</a></span>(byte[]&nbsp;key)</code>
<div class="block">Get the value associated with the given key, if any.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv">KVPair</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#getAtLeast-byte:A-byte:A-">getAtLeast</a></span>(byte[]&nbsp;minKey,
          byte[]&nbsp;maxKey)</code>
<div class="block">Get the key/value pair having the smallest key greater than or equal to the given minimum, if any.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv">KVPair</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#getAtMost-byte:A-byte:A-">getAtMost</a></span>(byte[]&nbsp;maxKey,
         byte[]&nbsp;minKey)</code>
<div class="block">Get the key/value pair having the largest key strictly less than the given maximum, if any.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#getDirectory--">getDirectory</a></span>()</code>
<div class="block">Get the filesystem directory containing the database.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../io/permazen/util/CloseableIterator.html" title="interface in io.permazen.util">CloseableIterator</a>&lt;<a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv">KVPair</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#getRange-byte:A-byte:A-boolean-">getRange</a></span>(byte[]&nbsp;minKey,
        byte[]&nbsp;maxKey,
        boolean&nbsp;reverse)</code>
<div class="block">Iterate the key/value pairs in the specified range.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#getTotalMillisWaiting--">getTotalMillisWaiting</a></span>()</code>
<div class="block">Get the total number of milliseconds spent in artificial delays caused by waiting for compaction.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#hotCopy-java.io.File-">hotCopy</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;target)</code>
<div class="block">Create a filesystem atomic snapshot, or "hot" copy", of this instance in the specified destination directory.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#mutate-io.permazen.kv.mvcc.Mutations-boolean-">mutate</a></span>(<a href="../../../../io/permazen/kv/mvcc/Mutations.html" title="interface in io.permazen.kv.mvcc">Mutations</a>&nbsp;mutations,
      boolean&nbsp;sync)</code>
<div class="block">Apply a set of mutations to this instance atomically.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#put-byte:A-byte:A-">put</a></span>(byte[]&nbsp;key,
   byte[]&nbsp;value)</code>
<div class="block">Set the value associated with the given key.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#remove-byte:A-">remove</a></span>(byte[]&nbsp;key)</code>
<div class="block">Remove the key/value pair with the given key, if it exists.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#removeRange-byte:A-byte:A-">removeRange</a></span>(byte[]&nbsp;minKey,
           byte[]&nbsp;maxKey)</code>
<div class="block">Remove all key/value pairs whose keys are in a given range.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;?&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#scheduleCompaction--">scheduleCompaction</a></span>()</code>
<div class="block">Schedule a new compaction cycle, unless there is one already scheduled or running, or there are no
 outstanding uncompacted modifications.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setCompactHighWater-int-">setCompactHighWater</a></span>(int&nbsp;compactHighWater)</code>
<div class="block">Configure the compaction space high-water mark in bytes.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setCompactLowWater-int-">setCompactLowWater</a></span>(int&nbsp;compactLowWater)</code>
<div class="block">Configure the compaction space low-water mark in bytes.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setCompactMaxDelay-int-">setCompactMaxDelay</a></span>(int&nbsp;compactMaxDelay)</code>
<div class="block">Configure the compaction time maximum delay.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setDirectory-java.io.File-">setDirectory</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;directory)</code>
<div class="block">Configure the filesystem directory containing the database.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#setScheduledExecutorService-java.util.concurrent.ScheduledExecutorService-">setScheduledExecutorService</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduledExecutorService)</code>
<div class="block">Configure the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> used to schedule background compaction.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../../../io/permazen/kv/CloseableKVStore.html" title="interface in io.permazen.kv">CloseableKVStore</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#snapshot--">snapshot</a></span>()</code>
<div class="block">Acquire a read-only, snapshot view of this instance based on the current state.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--">start</a></span>()</code>
<div class="block">Start this instance.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#stop--">stop</a></span>()</code>
<div class="block">Stop this instance.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.io.permazen.kv.KVStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;io.permazen.kv.<a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></h3>
<code><a href="../../../../io/permazen/kv/KVStore.html#getRange-byte:A-byte:A-">getRange</a>, <a href="../../../../io/permazen/kv/KVStore.html#getRange-io.permazen.kv.KeyRange-">getRange</a>, <a href="../../../../io/permazen/kv/KVStore.html#removeRange-io.permazen.kv.KeyRange-">removeRange</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_COMPACTION_MAX_DELAY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_COMPACTION_MAX_DELAY</h4>
<pre>public static final&nbsp;int DEFAULT_COMPACTION_MAX_DELAY</pre>
<div class="block">Default compaction maximum delay in seconds (86400 seconds).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#io.permazen.kv.array.AtomicArrayKVStore.DEFAULT_COMPACTION_MAX_DELAY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_COMPACTION_LOW_WATER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_COMPACTION_LOW_WATER</h4>
<pre>public static final&nbsp;int DEFAULT_COMPACTION_LOW_WATER</pre>
<div class="block">Default compaction space low-water mark in bytes (65536 bytes).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#io.permazen.kv.array.AtomicArrayKVStore.DEFAULT_COMPACTION_LOW_WATER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_COMPACTION_HIGH_WATER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_COMPACTION_HIGH_WATER</h4>
<pre>public static final&nbsp;int DEFAULT_COMPACTION_HIGH_WATER</pre>
<div class="block">Default compaction space high-water mark in bytes (1073741824 bytes).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#io.permazen.kv.array.AtomicArrayKVStore.DEFAULT_COMPACTION_HIGH_WATER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AtomicArrayKVStore--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AtomicArrayKVStore</h4>
<pre>public&nbsp;AtomicArrayKVStore()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDirectory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDirectory</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getDirectory()</pre>
<div class="block">Get the filesystem directory containing the database. If not set, this class functions as an im-memory store.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>database directory, or null for none</dd>
</dl>
</li>
</ul>
<a name="setDirectory-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDirectory</h4>
<pre>public&nbsp;void&nbsp;setDirectory(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;directory)</pre>
<div class="block">Configure the filesystem directory containing the database. If not set, this class functions as an im-memory store.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>directory</code> - database directory, or null for none</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--"><code>start()</code></a>ed</dd>
</dl>
</li>
</ul>
<a name="setScheduledExecutorService-java.util.concurrent.ScheduledExecutorService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setScheduledExecutorService</h4>
<pre>public&nbsp;void&nbsp;setScheduledExecutorService(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduledExecutorService)</pre>
<div class="block">Configure the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> used to schedule background compaction.

 <p>
 If not explicitly configured, a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> will be created automatically during <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--"><code>start()</code></a>
 using <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html?is-external=true#newSingleThreadScheduledExecutor--" title="class or interface in java.util.concurrent"><code>Executors.newSingleThreadScheduledExecutor()</code></a> and shutdown by <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#stop--"><code>stop()</code></a> (if explicitly configured here,
 the configured <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> will not be shutdown by <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#stop--"><code>stop()</code></a>).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>scheduledExecutorService</code> - schduled executor service, or null to have one created automatically</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--"><code>start()</code></a>ed</dd>
</dl>
</li>
</ul>
<a name="setCompactMaxDelay-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCompactMaxDelay</h4>
<pre>public&nbsp;void&nbsp;setCompactMaxDelay(int&nbsp;compactMaxDelay)</pre>
<div class="block">Configure the compaction time maximum delay. Compaction will be automatically triggered whenever there is any
 uncompacted modification older than this.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>compactMaxDelay</code> - compaction time maximum delay in seconds</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>compactMaxDelay</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--"><code>start()</code></a>ed</dd>
</dl>
</li>
</ul>
<a name="setCompactLowWater-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCompactLowWater</h4>
<pre>public&nbsp;void&nbsp;setCompactLowWater(int&nbsp;compactLowWater)</pre>
<div class="block">Configure the compaction space low-water mark in bytes.

 <p>
 This value is applied to the size of the on-disk modifications file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>compactLowWater</code> - compaction space low-water mark in bytes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>compactLowWater</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--"><code>start()</code></a>ed</dd>
</dl>
</li>
</ul>
<a name="setCompactHighWater-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCompactHighWater</h4>
<pre>public&nbsp;void&nbsp;setCompactHighWater(int&nbsp;compactHighWater)</pre>
<div class="block">Configure the compaction space high-water mark in bytes.

 <p>
 This value is applied to the size of the on-disk modifications file.

 <p>
 If the compaction space high water mark is set smaller than the the compaction space low water mark,
 then it's treated as if it were the same as the compaction space low water mark.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>compactHighWater</code> - compaction space high-water mark in bytes</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>compactHighWater</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#start--"><code>start()</code></a>ed</dd>
</dl>
</li>
</ul>
<a name="getTotalMillisWaiting--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalMillisWaiting</h4>
<pre>public&nbsp;long&nbsp;getTotalMillisWaiting()</pre>
<div class="block">Get the total number of milliseconds spent in artificial delays caused by waiting for compaction.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>total delay in milliseconds</dd>
</dl>
</li>
</ul>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/PostConstruct.html?is-external=true" title="class or interface in javax.annotation">@PostConstruct</a>
public&nbsp;void&nbsp;start()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#start--">AtomicKVStore</a></code></span></div>
<div class="block">Start this instance. This method must be called prior to creating any transactions.

 <p>
 This method is idempotent: if this instance is already started, nothing happens.

 <p>
 Whether an instance that has been started and stopped can be restarted is implementation-dependent.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#start--">start</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></code></dd>
</dl>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/PreDestroy.html?is-external=true" title="class or interface in javax.annotation">@PreDestroy</a>
public&nbsp;void&nbsp;stop()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#stop--">AtomicKVStore</a></code></span></div>
<div class="block">Stop this instance.

 <p>
 Any open <a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#snapshot--"><code>AtomicKVStore.snapshot()</code></a>'s should be <a href="../../../../io/permazen/kv/CloseableKVStore.html#close--"><code>close()</code></a>'d before invoking this method;
 the behavior of those that are not is undefined.

 <p>
 This method is idempotent: if this instance has not been started, or is already stopped, nothing happens.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#stop--">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></code></dd>
</dl>
</li>
</ul>
<a name="get-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;byte[]&nbsp;get(byte[]&nbsp;key)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#get-byte:A-">KVStore</a></code></span></div>
<div class="block">Get the value associated with the given key, if any.

 <p>
 Modifications to the returned <code>byte[]</code> array do not affect this instance.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#get-byte:A-">get</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#get-byte:A-">get</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - key</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>value associated with key, or null if not found</dd>
</dl>
</li>
</ul>
<a name="getAtLeast-byte:A-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAtLeast</h4>
<pre>public&nbsp;<a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv">KVPair</a>&nbsp;getAtLeast(byte[]&nbsp;minKey,
                         byte[]&nbsp;maxKey)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#getAtLeast-byte:A-byte:A-">KVStore</a></code></span></div>
<div class="block">Get the key/value pair having the smallest key greater than or equal to the given minimum, if any.

 <p>
 An optional (exclusive) maximum key may also be specified; if <code>maxKey</code> is null, there is no upper bound;
 if <code>maxKey &lt;= minKey</code>, null is always returned.

 <p>
 If keys starting with <code>0xff</code> are not supported by this instance, and <code>minKey</code> starts with <code>0xff</code>,
 then this method returns null.

 <p>
 Modifications to the returned <code>byte[]</code> arrays do not affect this instance.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#getAtLeast-byte:A-byte:A-">getAtLeast</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#getAtLeast-byte:A-byte:A-">getAtLeast</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>minKey</code> - minimum key (inclusive), or null for no minimum (get the smallest key)</dd>
<dd><code>maxKey</code> - maximum key (exclusive), or null for no maximum (no upper bound)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>smallest key/value pair with <code>key &gt;= minKey</code> and <code>key &lt; maxKey</code>, or null if none exists</dd>
</dl>
</li>
</ul>
<a name="getAtMost-byte:A-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAtMost</h4>
<pre>public&nbsp;<a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv">KVPair</a>&nbsp;getAtMost(byte[]&nbsp;maxKey,
                        byte[]&nbsp;minKey)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#getAtMost-byte:A-byte:A-">KVStore</a></code></span></div>
<div class="block">Get the key/value pair having the largest key strictly less than the given maximum, if any.

 <p>
 An optional (inclusive) minimum key may also be specified; if <code>minKey</code> is null, there is no lower bound
 (equivalent to a lower bound of the empty byte array); if <code>minKey &gt;= maxKey</code>, null is always returned.

 <p>
 If keys starting with <code>0xff</code> are not supported by this instance, and <code>maxKey</code> starts with <code>0xff</code>,
 then this method behaves as if <code>maxKey</code> were null.

 <p>
 Modifications to the returned <code>byte[]</code> arrays do not affect this instance.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#getAtMost-byte:A-byte:A-">getAtMost</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#getAtMost-byte:A-byte:A-">getAtMost</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxKey</code> - maximum key (exclusive), or null for no maximum (get the largest key)</dd>
<dd><code>minKey</code> - minimum key (inclusive), or null for no minimum (no lower bound)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>largest key/value pair with <code>key &lt; maxKey</code> and <code>key &gt;= minKey</code>, or null if none exists</dd>
</dl>
</li>
</ul>
<a name="getRange-byte:A-byte:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRange</h4>
<pre>public&nbsp;<a href="../../../../io/permazen/util/CloseableIterator.html" title="interface in io.permazen.util">CloseableIterator</a>&lt;<a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv">KVPair</a>&gt;&nbsp;getRange(byte[]&nbsp;minKey,
                                          byte[]&nbsp;maxKey,
                                          boolean&nbsp;reverse)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#getRange-byte:A-byte:A-boolean-">KVStore</a></code></span></div>
<div class="block">Iterate the key/value pairs in the specified range. The returned <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util"><code>Iterator</code></a>'s
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true#remove--" title="class or interface in java.util"><code>remove()</code></a> method must be supported and should have the same effect as
 invoking <a href="../../../../io/permazen/kv/KVStore.html#remove-byte:A-"><code>remove()</code></a> on the corresponding key.

 <p>
 If keys starting with <code>0xff</code> are not supported by this instance, and <code>minKey</code> starts with <code>0xff</code>,
 then this method returns an empty iteration.

 <p>
 If keys starting with <code>0xff</code> are not supported by this instance, and <code>maxKey</code> starts with <code>0xff</code>,
 then this method behaves as if <code>maxKey</code> were null.

 <p>
 The returned <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util"><code>Iterator</code></a> must not throw <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ConcurrentModificationException.html?is-external=true" title="class or interface in java.util"><code>ConcurrentModificationException</code></a>;
 however, whether or not a "live" <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util"><code>Iterator</code></a> reflects any modifications made after its creation is
 implementation dependent. Implementations that do make post-creation updates visible in the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util"><code>Iterator</code></a>,
 even if the update occurs after some delay, must preserve the order in which the modifications actually occurred.

 <p>
 The returned <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util"><code>Iterator</code></a> itself is not guaranteed to be thread safe.

 <p>
 Invokers of this method are encouraged to <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io"><code>close()</code></a> the returned iterators,
 though this is not required for correct behavior.

 <p>
 Modifications to the returned <a href="../../../../io/permazen/kv/KVPair.html" title="class in io.permazen.kv"><code>KVPair</code></a> key and value <code>byte[]</code> arrays do not affect this instance.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#getRange-byte:A-byte:A-boolean-">getRange</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>minKey</code> - minimum key (inclusive), or null for no minimum (start at the smallest key)</dd>
<dd><code>maxKey</code> - maximum key (exclusive), or null for no maximum (end at the largest key)</dd>
<dd><code>reverse</code> - true to return key/value pairs in reverse order (i.e., keys descending)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>iteration of key/value pairs in the range <code>minKey</code> (inclusive) to <code>maxKey</code> (exclusive)</dd>
</dl>
</li>
</ul>
<a name="put-byte:A-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre>public&nbsp;void&nbsp;put(byte[]&nbsp;key,
                byte[]&nbsp;value)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#put-byte:A-byte:A-">KVStore</a></code></span></div>
<div class="block">Set the value associated with the given key.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#put-byte:A-byte:A-">put</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#put-byte:A-byte:A-">put</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - key</dd>
<dd><code>value</code> - value</dd>
</dl>
</li>
</ul>
<a name="remove-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;void&nbsp;remove(byte[]&nbsp;key)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#remove-byte:A-">KVStore</a></code></span></div>
<div class="block">Remove the key/value pair with the given key, if it exists.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#remove-byte:A-">remove</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#remove-byte:A-">remove</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - key</dd>
</dl>
</li>
</ul>
<a name="removeRange-byte:A-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeRange</h4>
<pre>public&nbsp;void&nbsp;removeRange(byte[]&nbsp;minKey,
                        byte[]&nbsp;maxKey)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#removeRange-byte:A-byte:A-">KVStore</a></code></span></div>
<div class="block">Remove all key/value pairs whose keys are in a given range.

 <p>
 The <code>minKey</code> must be less than or equal to <code>maxKey</code>; if they equal (and not null)
 then nothing happens; if they are both null then all entries are deleted.

 <p>
 If keys starting with <code>0xff</code> are not supported by this instance, then:
 <ul>
  <li>If <code>minKey</code> starts with <code>0xff</code>, then no change occurs</li>
  <li>If <code>maxKey</code> starts with <code>0xff</code>, then this method behaves as if <code>maxKey</code> were null</li>
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#removeRange-byte:A-byte:A-">removeRange</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#removeRange-byte:A-byte:A-">removeRange</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>minKey</code> - minimum key (inclusive), or null for no minimum</dd>
<dd><code>maxKey</code> - maximum key (exclusive), or null for no maximum</dd>
</dl>
</li>
</ul>
<a name="adjustCounter-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustCounter</h4>
<pre>public&nbsp;void&nbsp;adjustCounter(byte[]&nbsp;key,
                          long&nbsp;amount)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#adjustCounter-byte:A-long-">KVStore</a></code></span></div>
<div class="block">Adjust the counter at the given key by the given amount.

 <p>
 Ideally this operation should behave in a lock-free manner, so that concurrent transactions can invoke it without
 conflict. However, when lock-free behavior occurs (if at all) depends on the implementation.

 <p>
 If there is no value associated with <code>key</code>, or <code>key</code>'s value is not a valid counter encoding as
 would be acceptable to <a href="../../../../io/permazen/kv/KVStore.html#decodeCounter-byte:A-"><code>decodeCounter()</code></a>, then how this operation affects <code>key</code>'s
 value is undefined.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#adjustCounter-byte:A-long-">adjustCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#adjustCounter-byte:A-long-">adjustCounter</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - key</dd>
<dd><code>amount</code> - amount to adjust counter value by</dd>
</dl>
</li>
</ul>
<a name="encodeCounter-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeCounter</h4>
<pre>public&nbsp;byte[]&nbsp;encodeCounter(long&nbsp;value)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#encodeCounter-long-">KVStore</a></code></span></div>
<div class="block">Encode a counter value into a <code>byte[]</code> value suitable for use with <a href="../../../../io/permazen/kv/KVStore.html#decodeCounter-byte:A-"><code>decodeCounter()</code></a>
 and/or <a href="../../../../io/permazen/kv/KVStore.html#adjustCounter-byte:A-long-"><code>adjustCounter()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#encodeCounter-long-">encodeCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#encodeCounter-long-">encodeCounter</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - desired counter value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>encoded counter value</dd>
</dl>
</li>
</ul>
<a name="decodeCounter-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decodeCounter</h4>
<pre>public&nbsp;long&nbsp;decodeCounter(byte[]&nbsp;bytes)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#decodeCounter-byte:A-">KVStore</a></code></span></div>
<div class="block">Decode a counter value previously encoded by <a href="../../../../io/permazen/kv/KVStore.html#encodeCounter-long-"><code>encodeCounter()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#decodeCounter-byte:A-">decodeCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/AbstractKVStore.html#decodeCounter-byte:A-">decodeCounter</a></code>&nbsp;in class&nbsp;<code><a href="../../../../io/permazen/kv/AbstractKVStore.html" title="class in io.permazen.kv">AbstractKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bytes</code> - encoded counter value</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>decoded counter value</dd>
</dl>
</li>
</ul>
<a name="apply-io.permazen.kv.mvcc.Mutations-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apply</h4>
<pre>public&nbsp;void&nbsp;apply(<a href="../../../../io/permazen/kv/mvcc/Mutations.html" title="interface in io.permazen.kv.mvcc">Mutations</a>&nbsp;mutations)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html#apply-io.permazen.kv.mvcc.Mutations-">KVStore</a></code></span></div>
<div class="block">Apply all the given <a href="../../../../io/permazen/kv/mvcc/Mutations.html" title="interface in io.permazen.kv.mvcc"><code>Mutations</code></a> to this instance.

 <p>
 Mutations are always to be applied in this order: removes, puts, counter adjustments.

 <p>
 The implementation in <a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv"><code>KVStore</code></a> simply iterates over the individual changes and applies them
 via <a href="../../../../io/permazen/kv/KVStore.html#remove-byte:A-"><code>remove()</code></a> (for removals of a single key), <a href="../../../../io/permazen/kv/KVStore.html#removeRange-byte:A-byte:A-"><code>removeRange()</code></a>,
 <a href="../../../../io/permazen/kv/KVStore.html#put-byte:A-byte:A-"><code>put()</code></a>, and/or <a href="../../../../io/permazen/kv/KVStore.html#adjustCounter-byte:A-long-"><code>adjustCounter()</code></a>. Implementations that can process
 batch updates more efficiently are encouraged to override this method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/KVStore.html#apply-io.permazen.kv.mvcc.Mutations-">apply</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv">KVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mutations</code> - mutations to apply</dd>
</dl>
</li>
</ul>
<a name="snapshot--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshot</h4>
<pre>public&nbsp;<a href="../../../../io/permazen/kv/CloseableKVStore.html" title="interface in io.permazen.kv">CloseableKVStore</a>&nbsp;snapshot()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#snapshot--">AtomicKVStore</a></code></span></div>
<div class="block">Acquire a read-only, snapshot view of this instance based on the current state.

 <p>
 The returned <a href="../../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv"><code>KVStore</code></a> view should remain constant even if this instance is subsequently mutated.

 <p>
 Note: callers are required to <a href="../../../../io/permazen/kv/CloseableKVStore.html#close--"><code>close</code></a> the returned instance when no longer in use.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#snapshot--">snapshot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>read-only, snapshot view of this instance</dd>
</dl>
</li>
</ul>
<a name="mutate-io.permazen.kv.mvcc.Mutations-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mutate</h4>
<pre>public&nbsp;void&nbsp;mutate(<a href="../../../../io/permazen/kv/mvcc/Mutations.html" title="interface in io.permazen.kv.mvcc">Mutations</a>&nbsp;mutations,
                   boolean&nbsp;sync)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#mutate-io.permazen.kv.mvcc.Mutations-boolean-">AtomicKVStore</a></code></span></div>
<div class="block">Apply a set of mutations to this instance atomically.

 <p>
 If this method returns normally, all of the given mutations will have been applied. If this method
 returns abnormally, then none of the given mutations will have been applied.

 <p>
 In any case, other threads observing this instance will never see a partial application of the given mutations.

 <p>
 This method is required to apply the mutations in this order: removes, puts, adjusts.

 <p>
 If <code>sync</code> is true, the implementation must durably persist the changes before returning.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html#mutate-io.permazen.kv.mvcc.Mutations-boolean-">mutate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../io/permazen/kv/mvcc/AtomicKVStore.html" title="interface in io.permazen.kv.mvcc">AtomicKVStore</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mutations</code> - the mutations to apply</dd>
<dd><code>sync</code> - if true, caller requires that the changes be durably persisted</dd>
</dl>
</li>
</ul>
<a name="hotCopy-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hotCopy</h4>
<pre>public&nbsp;void&nbsp;hotCopy(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;target)
             throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a filesystem atomic snapshot, or "hot" copy", of this instance in the specified destination directory.
 The copy will be up-to-date as of the time this method is invoked.

 <p>
 The <code>target</code> directory will be created if it does not exist; otherwise, it must be empty.
 All files except the uncompacted modifications file are copied into <code>target</code>
 in constant time using <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html?is-external=true#createLink-java.nio.file.Path-java.nio.file.Path-" title="class or interface in java.nio.file">hard links</a> if possible.

 <p>
 The hot copy operation can proceed in parallel with normal database activity, with the exception
 that the compaction operation cannot start while there are concurrent hot copies in progress.

 <p>
 Therefore, for best performance, consider <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#scheduleCompaction--">performing a compaction</a>
 immediately prior to this operation.

 <p>
 Note: when this method returns, all copied files, and the <code>target</code> directory, have been <code>fsync()</code>'d
 and therefore may be considered durable in case of a system crash.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>target</code> - destination directory</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an I/O error occurs</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>target</code> exists and is not a directory or is non-empty</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>target</code> is null</dd>
</dl>
</li>
</ul>
<a name="calculateCompactionPressureDelay-float-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateCompactionPressureDelay</h4>
<pre>protected&nbsp;long&nbsp;calculateCompactionPressureDelay(float&nbsp;windowRatio)</pre>
<div class="block">Calculate the maximum amount of time that a thread attempting to <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#mutate-io.permazen.kv.mvcc.Mutations-boolean-"><code>mutate()</code></a> must wait
 for a background compaction to complete as we start nearing the high water mark.

 <p>
 The implementation in <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html" title="class in io.permazen.kv.array"><code>AtomicArrayKVStore</code></a> returns <code>-1</code> for all values below 50%,
 and then scales according to an inverse power function returning zero at 50%, 100ms at 75%,
 and <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Long.MAX_VALUE</code></a> at 100%.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>windowRatio</code> - the uncompacted mutation size as a fraction of the interval between low and high
  water marks; always a value value between zero and one (exclusive)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>negative value for no delay, zero or positive value to trigger a background compaction
  (if not already running) and wait up to that many milliseconds for it to complete</dd>
</dl>
</li>
</ul>
<a name="scheduleCompaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleCompaction</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;?&gt;&nbsp;scheduleCompaction()</pre>
<div class="block">Schedule a new compaction cycle, unless there is one already scheduled or running, or there are no
 outstanding uncompacted modifications.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future for the completion of the next compaction cycle, or null if there are no uncompacted modifications</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not started</dd>
</dl>
</li>
</ul>
<a name="finalize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()
                 throws <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></pre>
<div class="block">Finalize this instance. Invokes <a href="../../../../io/permazen/kv/array/AtomicArrayKVStore.html#stop--"><code>stop()</code></a> to close any unclosed iterators.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></code></dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AtomicArrayKVStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../io/permazen/kv/array/ArrayKVWriter.html" title="class in io.permazen.kv.array"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/permazen/kv/array/AtomicArrayKVStore.html" target="_top">Frames</a></li>
<li><a href="AtomicArrayKVStore.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2022. All rights reserved.</small></p>
</body>
</html>
