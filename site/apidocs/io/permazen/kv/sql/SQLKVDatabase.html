<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>SQLKVDatabase (Permazen 5.1.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: io.permazen.kv.sql, class: SQLKVDatabase">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/SQLKVDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.permazen.kv.sql</a></div>
<h1 title="Class SQLKVDatabase" class="title">Class SQLKVDatabase</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.permazen.kv.sql.SQLKVDatabase</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../cockroach/CockroachKVDatabase.html" title="class in io.permazen.kv.cockroach">CockroachKVDatabase</a></code>, <code><a href="../mssql/MSSQLKVDatabase.html" title="class in io.permazen.kv.mssql">MSSQLKVDatabase</a></code>, <code><a href="../mysql/MySQLKVDatabase.html" title="class in io.permazen.kv.mysql">MySQLKVDatabase</a></code>, <code><a href="../sqlite/SQLiteKVDatabase.html" title="class in io.permazen.kv.sqlite">SQLiteKVDatabase</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">SQLKVDatabase</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></span></div>
<div class="block">Support superclass for SQL <a href="../KVDatabase.html" title="interface in io.permazen.kv"><code>KVDatabase</code></a> implementations.

 <p>
 <a href="../KVTransaction.html#watchKey(byte%5B%5D)">Key watches</a> are not supported.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></div>
<div class="col-second even-row-color"><code><a href="#dataSource" class="member-name-link">dataSource</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_KEY_COLUMN_NAME" class="member-name-link">DEFAULT_KEY_COLUMN_NAME</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Default key column name ("kv_key").</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_TABLE_NAME" class="member-name-link">DEFAULT_TABLE_NAME</a></code></div>
<div class="col-last even-row-color">
<div class="block">Default table name ("KV").</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_VALUE_COLUMN_NAME" class="member-name-link">DEFAULT_VALUE_COLUMN_NAME</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Default value column name ("kv_value").</div>
</div>
<div class="col-first even-row-color"><code>protected <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a></code></div>
<div class="col-second even-row-color"><code><a href="#isolationLevel" class="member-name-link">isolationLevel</a></code></div>
<div class="col-last even-row-color">
<div class="block">The default transaction isolation level.</div>
</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#keyColumnName" class="member-name-link">keyColumnName</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The name of the key column.</div>
</div>
<div class="col-first even-row-color"><code>protected final <a href="https://www.slf4j.org/apidocs/org/slf4j/Logger.html" title="class or interface in org.slf4j" class="external-link">Logger</a></code></div>
<div class="col-second even-row-color"><code><a href="#log" class="member-name-link">log</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#OPTION_ISOLATION" class="member-name-link">OPTION_ISOLATION</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Option key for <a href="#createTransaction(java.util.Map)"><code>createTransaction(Map)</code></a>.</div>
</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#tableName" class="member-name-link">tableName</a></code></div>
<div class="col-last even-row-color">
<div class="block">The name of the key/value table.</div>
</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#valueColumnName" class="member-name-link">valueColumnName</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The name of the value column.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">SQLKVDatabase</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#beginTransaction(java.sql.Connection)" class="member-name-link">beginTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Open a new SQL transaction on the given <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#configureConnection(java.sql.Connection)" class="member-name-link">configureConnection</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure a newly created <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createGetAllStatement(boolean)" class="member-name-link">createGetAllStatement</a><wbr>(boolean&nbsp;reverse)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that reads all of the key and value columns (in that order), possibly reversed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createGetAtLeastStatement(boolean)" class="member-name-link">createGetAtLeastStatement</a><wbr>(boolean&nbsp;reverse)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that reads the key and value columns (in that order) associated
 with the smallest key greater than or equal to <code>&#63;1</code>, if any.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createGetAtMostStatement(boolean)" class="member-name-link">createGetAtMostStatement</a><wbr>(boolean&nbsp;reverse)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that reads the key and value columns (in that order)
 associated with the greatest key strictly less than <code>&#63;1</code>, if any.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createGetRangeStatement(boolean)" class="member-name-link">createGetRangeStatement</a><wbr>(boolean&nbsp;reverse)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that reads the key and value columns (in that order) associated with all keys
 in the range <code>&#63;1</code> (inclusive) to <code>&#63;2</code> (exclusive), possibly reversed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createGetStatement()" class="member-name-link">createGetStatement</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that reads the value column associated with key <code>&#63;1</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createPutStatement()" class="member-name-link">createPutStatement</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that inserts the key/value pair with key <code>&#63;1</code> and value <code>&#63;2</code>
 A row with key <code>&#63;1</code> may already exist; if so, the value should be updated to
 <code>&#63;2</code> (if syntax requires it, the value may be updated to <code>&#63;3</code> instead;
 <code>&#63;3</code>, if it exists, will be set to the same value as <code>&#63;2</code>).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createRemoveAllStatement()" class="member-name-link">createRemoveAllStatement</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that deletes all rows.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createRemoveAtLeastStatement()" class="member-name-link">createRemoveAtLeastStatement</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that deletes all rows with keys greater than or equal to <code>&#63;1</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createRemoveAtMostStatement()" class="member-name-link">createRemoveAtMostStatement</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that deletes all rows with keys strictly less than <code>&#63;1</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createRemoveRangeStatement()" class="member-name-link">createRemoveRangeStatement</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that deletes all rows with keys in the range <code>&#63;1</code> (inclusive}
 to <code>&#63;2</code> (exclusive).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createRemoveStatement()" class="member-name-link">createRemoveStatement</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create an SQL statement that deletes the row associated with key <code>&#63;1</code>, if any.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createSQLKVTransaction(java.sql.Connection)" class="member-name-link">createSQLKVTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new <a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql"><code>SQLKVTransaction</code></a> for a new transaction given the specified <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTransaction()" class="member-name-link">createTransaction</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTransaction(java.util.Map)" class="member-name-link">createTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr>?&gt;&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTransactionConnection()" class="member-name-link">createTransactionConnection</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for a new transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDataSource()" class="member-name-link">getDataSource</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> used with this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIsolationLevel()" class="member-name-link">getIsolationLevel</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the default transaction isolation level.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIsolationLevel(java.util.Map)" class="member-name-link">getIsolationLevel</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr>?&gt;&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Extract the <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a>, if any, from the transaction options.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getKeyColumnName()" class="member-name-link">getKeyColumnName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the name of the column containing keys.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTableName()" class="member-name-link">getTableName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the name of the table containing keys and values.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getValueColumnName()" class="member-name-link">getValueColumnName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the name of the column containing values.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeDatabaseIfNecessary(java.sql.Connection)" class="member-name-link">initializeDatabaseIfNecessary</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform any required database initialization.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isRollbackForReadOnly()" class="member-name-link">isRollbackForReadOnly</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get whether to rollback read-only transactions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#limitSingleRow(java.lang.String)" class="member-name-link">limitSingleRow</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sql)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Modify the given SQL statement so that only one row is returned.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#postBeginTransaction(java.sql.Connection)" class="member-name-link">postBeginTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Subclass hook invoked just after opening a new SQL transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#preBeginTransaction(java.sql.Connection)" class="member-name-link">preBeginTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Subclass hook invoked just before opening a new SQL transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#quote(java.lang.String)" class="member-name-link">quote</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Enquote a table or column name as necessary.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDataSource(javax.sql.DataSource)" class="member-name-link">setDataSource</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> used with this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setIsolationLevel(io.permazen.kv.sql.IsolationLevel)" class="member-name-link">setIsolationLevel</a><wbr>(<a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a>&nbsp;isolationLevel)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the default transaction isolation level.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setKeyColumnName(java.lang.String)" class="member-name-link">setKeyColumnName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;keyColumnName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the name of the column containing keys.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRollbackForReadOnly(boolean)" class="member-name-link">setRollbackForReadOnly</a><wbr>(boolean&nbsp;rollbackForReadOnly)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure whether to rollback read-only transactions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTableName(java.lang.String)" class="member-name-link">setTableName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the name of the key/value table.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setValueColumnName(java.lang.String)" class="member-name-link">setValueColumnName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;valueColumnName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the name of the column containing values.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#start()" class="member-name-link">start</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Start this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stop()" class="member-name-link">stop</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stop this instance.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wrapException(io.permazen.kv.sql.SQLKVTransaction,java.sql.SQLException)" class="member-name-link">wrapException</a><wbr>(<a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a>&nbsp;e)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Wrap the given <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link"><code>SQLException</code></a> in the appropriate <a href="../KVTransactionException.html" title="class in io.permazen.kv"><code>KVTransactionException</code></a>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="DEFAULT_TABLE_NAME">
<h3>DEFAULT_TABLE_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">DEFAULT_TABLE_NAME</span></div>
<div class="block">Default table name ("KV").</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#io.permazen.kv.sql.SQLKVDatabase.DEFAULT_TABLE_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_KEY_COLUMN_NAME">
<h3>DEFAULT_KEY_COLUMN_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">DEFAULT_KEY_COLUMN_NAME</span></div>
<div class="block">Default key column name ("kv_key").</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#io.permazen.kv.sql.SQLKVDatabase.DEFAULT_KEY_COLUMN_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_VALUE_COLUMN_NAME">
<h3>DEFAULT_VALUE_COLUMN_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">DEFAULT_VALUE_COLUMN_NAME</span></div>
<div class="block">Default value column name ("kv_value").</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#io.permazen.kv.sql.SQLKVDatabase.DEFAULT_VALUE_COLUMN_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="OPTION_ISOLATION">
<h3>OPTION_ISOLATION</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">OPTION_ISOLATION</span></div>
<div class="block">Option key for <a href="#createTransaction(java.util.Map)"><code>createTransaction(Map)</code></a>. Value should be an <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a> instance,
 or the <code>name()</code> thereof.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#io.permazen.kv.sql.SQLKVDatabase.OPTION_ISOLATION">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dataSource">
<h3>dataSource</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></span>&nbsp;<span class="element-name">dataSource</span></div>
</section>
</li>
<li>
<section class="detail" id="tableName">
<h3>tableName</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">tableName</span></div>
<div class="block">The name of the key/value table. Default value is <a href="#DEFAULT_TABLE_NAME">"KV"</a>.</div>
</section>
</li>
<li>
<section class="detail" id="keyColumnName">
<h3>keyColumnName</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">keyColumnName</span></div>
<div class="block">The name of the key column. Default value is <a href="#DEFAULT_KEY_COLUMN_NAME">"kv_key"</a>.</div>
</section>
</li>
<li>
<section class="detail" id="valueColumnName">
<h3>valueColumnName</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">valueColumnName</span></div>
<div class="block">The name of the value column. Default value is <a href="#DEFAULT_VALUE_COLUMN_NAME">"kv_value"</a>.</div>
</section>
</li>
<li>
<section class="detail" id="isolationLevel">
<h3>isolationLevel</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a></span>&nbsp;<span class="element-name">isolationLevel</span></div>
<div class="block">The default transaction isolation level. Default is <a href="IsolationLevel.html#SERIALIZABLE"><code>IsolationLevel.SERIALIZABLE</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="log">
<h3>log</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://www.slf4j.org/apidocs/org/slf4j/Logger.html" title="class or interface in org.slf4j" class="external-link">Logger</a></span>&nbsp;<span class="element-name">log</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>SQLKVDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">SQLKVDatabase</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getDataSource()">
<h3>getDataSource</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></span>&nbsp;<span class="element-name">getDataSource</span>()</div>
<div class="block">Get the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> used with this instance.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the associated <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setDataSource(javax.sql.DataSource)">
<h3>setDataSource</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDataSource</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</span></div>
<div class="block">Configure the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> used with this instance.

 <p>
 Required property.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataSource</code> - access to the underlying database</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTableName()">
<h3>getTableName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getTableName</span>()</div>
<div class="block">Get the name of the table containing keys and values.

 <p>
 Default value is <a href="#DEFAULT_TABLE_NAME">"KV"</a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>key/value table name</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setTableName(java.lang.String)">
<h3>setTableName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setTableName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tableName)</span></div>
<div class="block">Set the name of the key/value table.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tableName</code> - the name of the key/value table</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>table</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getKeyColumnName()">
<h3>getKeyColumnName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getKeyColumnName</span>()</div>
<div class="block">Get the name of the column containing keys.

 <p>
 Default value is <a href="#DEFAULT_KEY_COLUMN_NAME">"kv_key"</a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the name of the key column</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setKeyColumnName(java.lang.String)">
<h3>setKeyColumnName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setKeyColumnName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;keyColumnName)</span></div>
<div class="block">Configure the name of the column containing keys.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>keyColumnName</code> - the name of the key column</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>keyColumnName</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getValueColumnName()">
<h3>getValueColumnName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getValueColumnName</span>()</div>
<div class="block">Get the name of the column containing values.

 <p>
 Default value is <a href="#DEFAULT_VALUE_COLUMN_NAME">"kv_value"</a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the name of the value column</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setValueColumnName(java.lang.String)">
<h3>setValueColumnName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setValueColumnName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;valueColumnName)</span></div>
<div class="block">Configure the name of the column containing values.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>valueColumnName</code> - the name of the value column</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>valueColumnName</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIsolationLevel()">
<h3>getIsolationLevel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a></span>&nbsp;<span class="element-name">getIsolationLevel</span>()</div>
<div class="block">Get the default transaction isolation level.

 <p>
 This may be overridden on a per-transaction basis; see <a href="#getIsolationLevel(java.util.Map)"><code>getIsolationLevel(Map)</code></a>.

 <p>
 Default value is <a href="IsolationLevel.html#SERIALIZABLE"><code>IsolationLevel.SERIALIZABLE</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>isolation level</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setIsolationLevel(io.permazen.kv.sql.IsolationLevel)">
<h3>setIsolationLevel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setIsolationLevel</span><wbr><span class="parameters">(<a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a>&nbsp;isolationLevel)</span></div>
<div class="block">Configure the default transaction isolation level.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>isolationLevel</code> - isolation level</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>isolationLevel</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isRollbackForReadOnly()">
<h3>isRollbackForReadOnly</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isRollbackForReadOnly</span>()</div>
<div class="block">Get whether to rollback read-only transactions.

 <p>
 If true, read-only transactions will be rolled back on commit. If false, mutations during read-only transactions
 will be captured in memory and not written to the database, and the underlying SQL transaction committed on commit.
 Some implementations require the latter in order to guarantee up-to-date reads within the transaction.

 <p>
 Default value is true.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>whether to use rollback when committing a read-only transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRollbackForReadOnly(boolean)">
<h3>setRollbackForReadOnly</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setRollbackForReadOnly</span><wbr><span class="parameters">(boolean&nbsp;rollbackForReadOnly)</span></div>
<div class="block">Configure whether to rollback read-only transactions.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rollbackForReadOnly</code> - true to use rollback when committing a read-only transaction.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#isRollbackForReadOnly()"><code>isRollbackForReadOnly()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="start()">
<h3>start</h3>
<div class="member-signature"><span class="annotations">@PostConstruct
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">start</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../KVDatabase.html#start()">KVDatabase</a></code></span></div>
<div class="block">Start this instance. This method must be called prior to creating any transactions.

 <p>
 This method is idempotent: if this instance is already started, nothing happens.

 <p>
 Whether an instance that has been started and stopped can be restarted is implementation-dependent.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../KVDatabase.html#start()">start</a></code>&nbsp;in interface&nbsp;<code><a href="../KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="stop()">
<h3>stop</h3>
<div class="member-signature"><span class="annotations">@PreDestroy
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">stop</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../KVDatabase.html#stop()">KVDatabase</a></code></span></div>
<div class="block">Stop this instance.

 <p>
 This method is idempotent: if this instance has not been started, or is already stopped, nothing happens.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../KVDatabase.html#stop()">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeDatabaseIfNecessary(java.sql.Connection)">
<h3>initializeDatabaseIfNecessary</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeDatabaseIfNecessary</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Perform any required database initialization.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> does nothing. Subclasses will
 typically invoke <code>CREATE TABLE ... IF NOT EXISTS</code> here, etc.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connection</code> - open database connection (will be closed by the caller of this method)</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createTransaction(java.util.Map)">
<h3>createTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a></span>&nbsp;<span class="element-name">createTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr>?&gt;&nbsp;options)</span></div>
<div class="block">Create a new transaction.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> invokes <a href="#createTransactionConnection()"><code>createTransactionConnection()</code></a>
 to get a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for the new transaction, then invokes these methods in order:
  <ol>
  <li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setTransactionIsolation(int)" title="class or interface in java.sql" class="external-link"><code>Connection.setTransactionIsolation()</code></a></li>
  <li><a href="#preBeginTransaction(java.sql.Connection)"><code>preBeginTransaction()</code></a></li>
  <li><a href="#beginTransaction(java.sql.Connection)"><code>beginTransaction()</code></a></li>
  <li><a href="#postBeginTransaction(java.sql.Connection)"><code>postBeginTransaction()</code></a></li>
  <li><a href="#createSQLKVTransaction(java.sql.Connection)"><code>createSQLKVTransaction()</code></a></li>
  </ol>
 and returns the result.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../KVDatabase.html#createTransaction(java.util.Map)">createTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
<dt>Parameters:</dt>
<dd><code>options</code> - optional transaction options; may be null</dd>
<dt>Returns:</dt>
<dd>newly created transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="../KVDatabaseException.html" title="class in io.permazen.kv">KVDatabaseException</a></code> - if an unexpected error occurs</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if no <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> is <a href="#setDataSource(javax.sql.DataSource)">configured</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createTransaction()">
<h3>createTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a></span>&nbsp;<span class="element-name">createTransaction</span>()</div>
<div class="block">Create a new transaction.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> invokes <a href="#createTransaction(java.util.Map)"><code>createTransaction(null)</code></a>
 (i.e., with no options) and returns the result.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../KVDatabase.html#createTransaction()">createTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../KVDatabase.html" title="interface in io.permazen.kv">KVDatabase</a></code></dd>
<dt>Returns:</dt>
<dd>newly created transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="../KVDatabaseException.html" title="class in io.permazen.kv">KVDatabaseException</a></code> - if an unexpected error occurs</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if no <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a> is <a href="#setDataSource(javax.sql.DataSource)">configured</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getIsolationLevel(java.util.Map)">
<h3>getIsolationLevel</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql">IsolationLevel</a></span>&nbsp;<span class="element-name">getIsolationLevel</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr>?&gt;&nbsp;options)</span></div>
<div class="block">Extract the <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a>, if any, from the transaction options.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> supports an <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a> under the key <a href="#OPTION_ISOLATION"><code>OPTION_ISOLATION</code></a>;
 also, the <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a> may be configured by the Spring
 <a href="../../spring/PermazenTransactionManager.html" title="class in io.permazen.spring"><code>PermazenTransactionManager</code></a>, for example, using the
 <a href="https://docs.spring.io/spring-framework/docs/6.1.10/javadoc-api/org/springframework/transaction/annotation/Transactional.html" title="class or interface in org.springframework.transaction.annotation" class="external-link"><code>&#64;Transactional</code></a> annotation.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>options</code> - transaction options</dd>
<dt>Returns:</dt>
<dd>transaction isolation</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createTransactionConnection()">
<h3>createTransactionConnection</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></span>&nbsp;<span class="element-name">createTransactionConnection</span>()
                                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Create a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for a new transaction.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> invokes <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection()" title="class or interface in javax.sql" class="external-link"><code>DataSource.getConnection()</code></a> on the
 <a href="#dataSource">configured</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a>, and then deletates to
 <a href="#configureConnection(java.sql.Connection)"><code>configureConnection()</code></a> to perform any required configuration
 of the new <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>new transaction <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="configureConnection(java.sql.Connection)">
<h3>configureConnection</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">configureConnection</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Configure a newly created <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> does nothing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connection</code> - newly created <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="preBeginTransaction(java.sql.Connection)">
<h3>preBeginTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">preBeginTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Subclass hook invoked just before opening a new SQL transaction.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> does nothing. Note: subclasses must ensure the transaction is
 configured for the <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a> configured on this instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connection</code> - the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for a new transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#createSQLKVTransaction(java.sql.Connection)"><code>createSQLKVTransaction()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="beginTransaction(java.sql.Connection)">
<h3>beginTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">beginTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Open a new SQL transaction on the given <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> invokes <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setAutoCommit(boolean)" title="class or interface in java.sql" class="external-link"><code>Connection.setAutoCommit(false)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connection</code> - the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for a new transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#createSQLKVTransaction(java.sql.Connection)"><code>createSQLKVTransaction()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="postBeginTransaction(java.sql.Connection)">
<h3>postBeginTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">postBeginTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</span>
                             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Subclass hook invoked just after opening a new SQL transaction.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> does nothing. Note: subclasses must ensure the transaction is
 configured for the <a href="IsolationLevel.html" title="enum class in io.permazen.kv.sql"><code>IsolationLevel</code></a> configured on this instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connection</code> - the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for a new transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#createSQLKVTransaction(java.sql.Connection)"><code>createSQLKVTransaction()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createSQLKVTransaction(java.sql.Connection)">
<h3>createSQLKVTransaction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a></span>&nbsp;<span class="element-name">createSQLKVTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;connection)</span>
                                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Create a new <a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql"><code>SQLKVTransaction</code></a> for a new transaction given the specified <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a>.
 There will already be an SQL transaction open on <code>connection</code>.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> just invokes
 <a href="SQLKVTransaction.html#%3Cinit%3E(io.permazen.kv.sql.SQLKVDatabase,java.sql.Connection)"><code>new SQLKVTransaction(this, connection)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connection</code> - the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> for a new transaction</dd>
<dt>Returns:</dt>
<dd>newly created transaction</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if an error occurs</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createGetStatement()">
<h3>createGetStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createGetStatement</span>()</div>
<div class="block">Create an SQL statement that reads the value column associated with key <code>&#63;1</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL query statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createGetAtLeastStatement(boolean)">
<h3>createGetAtLeastStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createGetAtLeastStatement</span><wbr><span class="parameters">(boolean&nbsp;reverse)</span></div>
<div class="block">Create an SQL statement that reads the key and value columns (in that order) associated
 with the smallest key greater than or equal to <code>&#63;1</code>, if any.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reverse</code> - true to return rows in descending key order, false to return rows in ascending key order</dd>
<dt>Returns:</dt>
<dd>SQL query statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createGetAtMostStatement(boolean)">
<h3>createGetAtMostStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createGetAtMostStatement</span><wbr><span class="parameters">(boolean&nbsp;reverse)</span></div>
<div class="block">Create an SQL statement that reads the key and value columns (in that order)
 associated with the greatest key strictly less than <code>&#63;1</code>, if any.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reverse</code> - true to return rows in descending key order, false to return rows in ascending key order</dd>
<dt>Returns:</dt>
<dd>SQL query statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createGetRangeStatement(boolean)">
<h3>createGetRangeStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createGetRangeStatement</span><wbr><span class="parameters">(boolean&nbsp;reverse)</span></div>
<div class="block">Create an SQL statement that reads the key and value columns (in that order) associated with all keys
 in the range <code>&#63;1</code> (inclusive) to <code>&#63;2</code> (exclusive), possibly reversed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reverse</code> - true to return rows in descending key order, false to return rows in ascending key order</dd>
<dt>Returns:</dt>
<dd>SQL query statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createGetAllStatement(boolean)">
<h3>createGetAllStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createGetAllStatement</span><wbr><span class="parameters">(boolean&nbsp;reverse)</span></div>
<div class="block">Create an SQL statement that reads all of the key and value columns (in that order), possibly reversed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>reverse</code> - true to return rows in descending key order, false to return rows in ascending key order</dd>
<dt>Returns:</dt>
<dd>SQL query statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createPutStatement()">
<h3>createPutStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createPutStatement</span>()</div>
<div class="block">Create an SQL statement that inserts the key/value pair with key <code>&#63;1</code> and value <code>&#63;2</code>
 A row with key <code>&#63;1</code> may already exist; if so, the value should be updated to
 <code>&#63;2</code> (if syntax requires it, the value may be updated to <code>&#63;3</code> instead;
 <code>&#63;3</code>, if it exists, will be set to the same value as <code>&#63;2</code>).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL insertion statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createRemoveStatement()">
<h3>createRemoveStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createRemoveStatement</span>()</div>
<div class="block">Create an SQL statement that deletes the row associated with key <code>&#63;1</code>, if any.
 Note that the key may or may not exist prior to this method being invoked.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL delete statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createRemoveRangeStatement()">
<h3>createRemoveRangeStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createRemoveRangeStatement</span>()</div>
<div class="block">Create an SQL statement that deletes all rows with keys in the range <code>&#63;1</code> (inclusive}
 to <code>&#63;2</code> (exclusive).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL delete statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createRemoveAtLeastStatement()">
<h3>createRemoveAtLeastStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createRemoveAtLeastStatement</span>()</div>
<div class="block">Create an SQL statement that deletes all rows with keys greater than or equal to <code>&#63;1</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL delete statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createRemoveAtMostStatement()">
<h3>createRemoveAtMostStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createRemoveAtMostStatement</span>()</div>
<div class="block">Create an SQL statement that deletes all rows with keys strictly less than <code>&#63;1</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL delete statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createRemoveAllStatement()">
<h3>createRemoveAllStatement</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">createRemoveAllStatement</span>()</div>
<div class="block">Create an SQL statement that deletes all rows.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>SQL delete statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="limitSingleRow(java.lang.String)">
<h3>limitSingleRow</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">limitSingleRow</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sql)</span></div>
<div class="block">Modify the given SQL statement so that only one row is returned.

 <p>
 This is an optional method; returning <code>statement</code> unmodified is acceptable, but subclasses may
 be able to improve efficiency by modifying the SQL statement in a vendor-specific manner to only return one row.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> returns its parameter unchanged.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sql</code> - SQL statement</dd>
<dt>Returns:</dt>
<dd>SQL statement</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="quote(java.lang.String)">
<h3>quote</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">quote</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name)</span></div>
<div class="block">Enquote a table or column name as necessary.

 <p>
 The implementation in <a href="SQLKVDatabase.html" title="class in io.permazen.kv.sql"><code>SQLKVDatabase</code></a> returns its parameter unchanged.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>name</code> - table or column name</dd>
<dt>Returns:</dt>
<dd><code>name</code> enquoted as necessary for this database type</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>name</code> is null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="wrapException(io.permazen.kv.sql.SQLKVTransaction,java.sql.SQLException)">
<h3>wrapException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../KVTransactionException.html" title="class in io.permazen.kv">KVTransactionException</a></span>&nbsp;<span class="element-name">wrapException</span><wbr><span class="parameters">(<a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql">SQLKVTransaction</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a>&nbsp;e)</span></div>
<div class="block">Wrap the given <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link"><code>SQLException</code></a> in the appropriate <a href="../KVTransactionException.html" title="class in io.permazen.kv"><code>KVTransactionException</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - the <a href="SQLKVTransaction.html" title="class in io.permazen.kv.sql"><code>SQLKVTransaction</code></a> in which the exception occured</dd>
<dd><code>e</code> - SQL exception</dd>
<dt>Returns:</dt>
<dd>appropriate <a href="../KVTransactionException.html" title="class in io.permazen.kv"><code>KVTransactionException</code></a> with chained exception <code>e</code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link">NullPointerException</a></code> - if <code>e</code> is null</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
