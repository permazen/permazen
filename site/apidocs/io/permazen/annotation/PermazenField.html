<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>PermazenField (Permazen 5.2.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: io.permazen.annotation, annotation type: PermazenField">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/PermazenField.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a>&nbsp;|&nbsp;</li>
<li>Required</li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.permazen.annotation</a></div>
<h1 title="Annotation Interface PermazenField" class="title">Annotation Interface PermazenField</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>({<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#ANNOTATION_TYPE" title="class or interface in java.lang.annotation" class="external-link">ANNOTATION_TYPE</a>,<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#METHOD" title="class or interface in java.lang.annotation" class="external-link">METHOD</a>})
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">PermazenField</span></div>
<div class="block">Java annotation for defining simple fields (including reference fields that refer to other Java model object types)
 and <a href="../Counter.html" title="class in io.permazen"><code>Counter</code></a> fields.

 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-java.min.js"></script>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism.min.css" rel="stylesheet"/>

 <p>
 This annotation is used in two scenarios:
 <ul>
  <li>To configure a <b>simple</b> or <b>counter</b> database field, by annotating the corresponding abstract Java bean
      property "getter" method
  <li>To configure the <b>sub-field</b> of a <b>complex</b> database field (i.e., set, list, or map), that is,
      a collection <code>element</code> field, or a map <code>key</code> or <code>value</code> field. In this case this annotation
      nests within the corresponding <a href="PermazenListField.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenListField</code></a>,
      <a href="PermazenSetField.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenSetField</code></a>, or <a href="PermazenMapField.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenMapField</code></a> annotation.
 </ul>

 <p>
 When auto-generation of properties is enabled, use of this annotation is not required unless you want to override
 the defaults; see <a href="PermazenType.html#autogenFields()"><code>PermazenType.autogenFields()</code></a>.

 <p>
 The annotated method's declaring class does not have to be a <a href="PermazenType.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenType</code></a>-annotated type;
 annotations are "inherited" and so apply to all <a href="PermazenType.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenType</code></a>-annotated sub-types.

 <p><b>Reference Fields</b></p>

 <p>
 If the type of the field is a <a href="PermazenType.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenType</code></a>-annotated Java model object type, or any supertype
 thereof, then the field is a <b>reference</b> field. Reference fields are simple fields that refer to other database objects.

 <p><b>Non-Reference Fields</b></p>

 <p>
 If the field is not a reference field, the field's Java type is inferred from the type of the annotated method or,
 in the case of complex sub-fields, the generic type of the collection class. The field's Java type must be supported by
 some <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a> registered in the <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a> that is
 <a href="../PermazenConfig.Builder.html" title="class in io.permazen">configured</a> for the database so that the field's values can be encoded
 into <code>byte[]</code> array values in the key/value store.

 <p>
 See <a href="../encoding/DefaultEncodingRegistry.html" title="class in io.permazen.encoding"><code>DefaultEncodingRegistry</code></a> for a list of built-in (pre-defined) encodings.

 <p>
 To use a user-defined encoding, configure a custom <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a> that knows about the encoding and
 then refer to it by its unique <a href="../encoding/EncodingId.html" title="class in io.permazen.encoding"><code>EncodingId</code></a> via <a href="#encoding()"><code>encoding()</code></a>.

 <p><b>Referential Integrity</b></p>

 <p>
 In general, reference fields may reference objects that don't actually exist. This can happen in one of two ways:
 (a) a field is set to an invalid reference, or (b) a field references a valid object that is subsequently deleted.
 The <a href="#allowDeleted()"><code>allowDeleted()</code></a> and <a href="#inverseDelete()"><code>inverseDelete()</code></a> properties, respectively, control whether (a) or (b) is permitted.

 <p>
 By default, neither (a) nor (b) is allowed; if either is attempted, a <a href="../core/DeletedObjectException.html" title="class in io.permazen.core"><code>DeletedObjectException</code></a> is thrown.
 This ensures references are always valid.

 <p><b>Indexing</b></p>

 <p>
 Simple fields may be indexed by marking them as <a href="#indexed()"><code>indexed()</code></a>; see <a href="../PermazenTransaction.html" title="class in io.permazen"><code>PermazenTransaction</code></a> for information on querying
 indexes. This includes reference fields and fields with user-defined custom encodings.

 <p>
 Reference fields are always indexed.

 <p>
 <a href="../Counter.html" title="class in io.permazen"><code>Counter</code></a> fields may not be indexed.

 <p>
 Two or more simple fields may be indexed together in a composite index; see
 <a href="PermazenCompositeIndex.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenCompositeIndex</code></a>.

 <p><b>Reference Cascades</b></p>

 <p>
 Reference cascades allow you to define an arbitrary graph of objects by specifying the reference fields that constitute
 the edges of the graph. Reference cascades are identified by name, and a reference field is included in a reference cascade
 when that name appears in <a href="#forwardCascades()"><code>forwardCascades()</code></a> and/or <a href="#inverseCascades()"><code>inverseCascades()</code></a>. Reference fields in reference cascades
 can be traversed in either the forward or reverse directions.

 <p>
 For example, the <a href="../PermazenObject.html" title="interface in io.permazen"><code>PermazenObject</code></a> methods <a href="../PermazenObject.html#copyIn(java.lang.String...)"><code>copyIn()</code></a>,
 <a href="../PermazenObject.html#copyOut(java.lang.String...)"><code>copyOut()</code></a>, and <a href="../PermazenObject.html#copyTo(io.permazen.PermazenTransaction,int,io.permazen.CopyState,java.lang.String...)"><code>copyTo()</code></a>
 copy a graph of related objects between transactions by first copying a starting object and then cascading through matching
 reference fields, repeating recursively. There is also <a href="../PermazenTransaction.html#cascade(io.permazen.core.ObjId,int,io.permazen.core.util.ObjIdSet,java.lang.String...)"><code>PermazenTransaction.cascade()</code></a> which
 performs a general purpose cascade exploration and returns the corresponding set of objects.

 <p>
 Which reference fields are traversed in a particular find or copy operation is determined by the supplied <i>cascade name</i>.
 Outgoing references are traversed if the cascade name is in the reference field's <a href="#forwardCascades()"><code>forwardCascades()</code></a> property,
 while incoming references from other objects are traversed (in the reverse direction) if the cascade name is in the
 referring object's reference field's <a href="#inverseCascades()"><code>inverseCascades()</code></a>.

 <p>
 For example:
 <pre><code class="language-java">
  &#64;PermazenType
  public interface TreeNode extends PermazenObject {

      /**
       * Get the parent of this node, or null if node is a root.
       *&#47;
      &#64;PermazenField(<b>forwardCascades = { "tree", "ancestors" }</b>, <b>inverseCascades = { "tree", "descendants" }</b>)
      TreeNode getParent();
      void setParent(TreeNode parent);

      /**
       * Get the children of this node.
       *&#47;
      &#64;ReferencePath("&lt;-TreeNode.parent")
      NavigableSet&lt;TreeNode&gt; getChildren();

      default TreeNode copySubtreeTo(PermazenTransaction dest) {
          return (TreeNode)this.cascadeCopyTo(dest, <b>"descendants"</b>, false);
      }

      default TreeNode copyWithAnscestorsTo(PermazenTransaction dest) {
          return (TreeNode)this.cascadeCopyTo(dest, <b>"ancestors"</b>, false);
      }

      default TreeNode copyEntireTreeTo(PermazenTransaction dest) {
          return (TreeNode)this.cascadeCopyTo(dest, <b>"tree"</b>, false);
      }

      default TreeNode cloneEntireTreeTo(PermazenTransaction dest) {
          return (TreeNode)this.cascadeCopyTo(dest, <b>"tree"</b>, true);
      }

      default TreeNode cloneEntireTree() {
          return (TreeNode)this.cascadeCopyTo(this.getTransaction(), <b>"tree"</b>, true);
      }
  }
 </code></pre>

 <p><b>References and Deletion</b></p>

 <p>
 Reference fields have configurable behavior when the referring object or the referred-to object is deleted;
 see <a href="#forwardDelete()"><code>forwardDelete()</code></a> and <a href="#inverseDelete()"><code>inverseDelete()</code></a>.

 <p><b>Uniqueness Constraints</b></p>

 <p>
 Simple fields that are not complex sub-fields may be marked as <a href="#unique()"><code>unique()</code></a> to impose a uniqueness constraint on the field.
 Uniqueness constraints function as an implicit validation constraint. In other words, the uniqueness constraint is verified
 when the validation queue is processed, and is affected by the transaction's configured <a href="../ValidationMode.html" title="enum class in io.permazen"><code>ValidationMode</code></a>.

 <p>
 A uniqueness constraint applies to all objects that are instances of the class in which the field is declared. For example,
 if classes <code>Dog</code> and <code>Cat</code> both implement <code>Pet</code>, then a uniqueness constraint on a field declared in
 <code>Pet</code> would apply across all dogs and cats, whereas unique constraints on fields declared in <code>Dog</code> and/or
 <code>Cat</code> would only apply to that specific animal. Note this remains true even when <code>Dog</code> and <code>Cat</code> declare
 the same field; for example, if <code>Dog</code> and <code>Cat</code> both declare a <code>"name"</code> field, then you could have two pets
 with the same name, but only if one is a <code>Dog</code> and one is a <code>Cat</code>.

 <p>
 Optionally, specific values may be marked as excluded from the uniqueness constraint via <a href="#uniqueExcludes()"><code>uniqueExcludes()</code></a>.
 If so, the specified values may appear in more than one object without violating the constraint.

 <p>
 In <a href="../ValidationMode.html#AUTOMATIC"><code>ValidationMode.AUTOMATIC</code></a>, any upgraded <a href="../PermazenObject.html" title="interface in io.permazen"><code>PermazenObject</code></a>s are automatically added to the validation queue,
 so a uniqueness constraint added in a new schema will be automatically verified when any object is upgraded.

 <p>
 Beware however, that like most other types of validation constraint, adding or changing a uniqueness constraint can cause
 valid database objects to become invalid without immediate notice, or at least not until if/when the object is revalidated
 in some future transaction. In such a situation, you can force a schema change - and therefore revalidation on the next
 access - by incrementing <a href="PermazenType.html#schemaEpoch()"><code>PermazenType.schemaEpoch()</code></a> in the field's containing type.

 <p><b>Upgrade Conversions</b></p>

 <p>
 When a field's type has changed in a new schema, the old field value can be automatically converted into the
 new type. See <a href="#upgradeConversion()"><code>upgradeConversion()</code></a> for how to control this behavior.

 <p><b>Meta-Annotations</b></p>

 <p>
 This annotation may be configured indirectly as a Spring
 <a href="https://docs.spring.io/spring-framework/reference/core/beans/classpath-scanning.html#beans-meta-annotations">meta-annotation</a>
 when <code>spring-core</code> is on the classpath.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#allowDeleted()" class="member-name-link">allowDeleted</a></code></div>
<div class="col-last even-row-color">
<div class="block">Allow the field to reference non-existent objects in normal transactions.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#encoding()" class="member-name-link">encoding</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specify the encoding for this field by <a href="../encoding/EncodingId.html" title="class in io.permazen.encoding"><code>EncodingId</code></a> URN.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#forwardCascades()" class="member-name-link">forwardCascades</a></code></div>
<div class="col-last even-row-color">
<div class="block">Define forward reference cascades for the annotated reference field.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#forwardDelete()" class="member-name-link">forwardDelete</a></code></div>
<div class="col-last odd-row-color">
<div class="block">For reference fields, configure cascading behavior when the referring object is
 <a href="../PermazenObject.html#delete()">deleted</a>.</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#indexed()" class="member-name-link">indexed</a></code></div>
<div class="col-last even-row-color">
<div class="block">Whether this field is indexed or not.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#inverseCascades()" class="member-name-link">inverseCascades</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Define inverse find/copy cascades for the annotated reference field.</div>
</div>
<div class="col-first even-row-color"><code><a href="../core/DeleteAction.html" title="enum class in io.permazen.core">DeleteAction</a></code></div>
<div class="col-second even-row-color"><code><a href="#inverseDelete()" class="member-name-link">inverseDelete</a></code></div>
<div class="col-last even-row-color">
<div class="block">For reference fields, configure the behavior when the referred-to object is
 <a href="../PermazenObject.html#delete()">deleted</a>.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#name()" class="member-name-link">name</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The name of this field.</div>
</div>
<div class="col-first even-row-color"><code>int</code></div>
<div class="col-second even-row-color"><code><a href="#storageId()" class="member-name-link">storageId</a></code></div>
<div class="col-last even-row-color">
<div class="block">Storage ID for this field.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#unique()" class="member-name-link">unique</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Require this field's value to be unique among all database objects.</div>
</div>
<div class="col-first even-row-color"><code><a href="Values.html" title="annotation interface in io.permazen.annotation">Values</a></code></div>
<div class="col-second even-row-color"><code><a href="#uniqueExcludes()" class="member-name-link">uniqueExcludes</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specify field value(s) that should be excluded from the uniqueness constraint.</div>
</div>
<div class="col-first odd-row-color"><code><a href="../UpgradeConversionPolicy.html" title="enum class in io.permazen">UpgradeConversionPolicy</a></code></div>
<div class="col-second odd-row-color"><code><a href="#upgradeConversion()" class="member-name-link">upgradeConversion</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specify the <a href="../UpgradeConversionPolicy.html" title="enum class in io.permazen"><code>UpgradeConversionPolicy</code></a> policy to apply when this field's type has changed due to a schema change.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="name()">
<h3>name</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">name</span></div>
<div class="block">The name of this field.

 <p>
 If equal to the empty string (default value), the name is inferred from the name of the annotated Java bean getter method.

 <p>
 For sub-fields of complex fields, this property must be left unset.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the name of the field</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="encoding()">
<h3>encoding</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">encoding</span></div>
<div class="block">Specify the encoding for this field by <a href="../encoding/EncodingId.html" title="class in io.permazen.encoding"><code>EncodingId</code></a> URN.

 <p>
 If set, this must equal the <a href="../encoding/EncodingId.html" title="class in io.permazen.encoding"><code>EncodingId</code></a> of an <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a> registered in the <a href="../encoding/EncodingRegistry.html" title="interface in io.permazen.encoding"><code>EncodingRegistry</code></a>
 associated with the <a href="../core/Database.html" title="class in io.permazen.core"><code>Database</code></a> instance, and the annotated method's return type must match the
 <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a>'s <a href="../encoding/Encoding.html#getTypeToken()">supported Java type</a>.

 <p>
 If this is left unset (empty string), then the Java type is inferred from the return type of the getter method
 and the <a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a> is found via <a href="../encoding/EncodingRegistry.html#getEncoding(com.google.common.reflect.TypeToken)"><code>EncodingRegistry.getEncoding(TypeToken)</code></a>.

 <p>
 For any of Permazen's built-in types, the Permazen URN prefix <a href="../encoding/EncodingIds.html#PERMAZEN_PREFIX">"urn:fdc:permazen.io:2020:"</a>
 may be omitted. Otherwise, see <a href="../encoding/EncodingId.html" title="class in io.permazen.encoding"><code>EncodingId</code></a> for the required format. Custom encodings can be found automatically
 on the application class path; see <a href="../encoding/DefaultEncodingRegistry.html" title="class in io.permazen.encoding"><code>DefaultEncodingRegistry</code></a> for details.

 <p>
 For reference fields, this property must be left unset.

 <p>
 For sub-fields of complex fields, this property can be used to force a primitive type instead of a
 primitive wrapper type. In that case, the complex field will disallow null values. For example:
 <pre>
  &#64;PermazenSetField(element = &#64;PermazenField(<b>type = "float"</b>)) // nulls will be disallowed
  public abstract List&lt;<b>Float</b>&gt; getScores();
 </pre></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>URN identifying the field's encoding</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../encoding/Encoding.html" title="interface in io.permazen.encoding"><code>Encoding</code></a></li>
<li><a href="../encoding/EncodingRegistry.html#getEncoding(io.permazen.encoding.EncodingId)"><code>EncodingRegistry.getEncoding(EncodingId)</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="storageId()">
<h3>storageId</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">storageId</span></div>
<div class="block">Storage ID for this field.

 <p>
 Normally this value is left as zero, in which case a value will be automatically assigned.

 <p>
 Otherwise, the value should be positive and unique within the contained class.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the field's storage ID, or zero for automatic assignment</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="indexed()">
<h3>indexed</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">indexed</span></div>
<div class="block">Whether this field is indexed or not.

 <p>
 Setting this property to true creates a simple index on this field. To have this field participate in
 a composite index on multiple fields, use <a href="PermazenCompositeIndex.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenCompositeIndex</code></a>.

 <p>
 Note: reference fields are always indexed (for reference fields, this property is ignored).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>whether the field is indexed</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="PermazenCompositeIndex.html" title="annotation interface in io.permazen.annotation"><code>&#64;PermazenCompositeIndex</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forwardCascades()">
<h3>forwardCascades</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">forwardCascades</span></div>
<div class="block">Define forward reference cascades for the annotated reference field.

 <p>
 When following a cascade of references, if the cascade name is one of the names listed here,
 and an object with the annotated reference field is encountered, then the annotated reference
 field will will be traversed in the forward direction.

 <p>
 Cascade names must be non-empty.

 <p>
 For non-reference fields this property must be equal to its default value.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>forward cascade names for the annotated reference field</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../PermazenObject.html#copyTo(io.permazen.PermazenTransaction,int,io.permazen.CopyState,java.lang.String...)"><code>PermazenObject.copyTo()</code></a></li>
<li><a href="../PermazenTransaction.html#cascade(io.permazen.core.ObjId,int,io.permazen.core.util.ObjIdSet,java.lang.String...)"><code>PermazenTransaction.cascade()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="inverseCascades()">
<h3>inverseCascades</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">inverseCascades</span></div>
<div class="block">Define inverse find/copy cascades for the annotated reference field.

 <p>
 When following a cascade of references, if the cascade name is one of the names listed here,
 and an object is encountered that is referred to through the annotated reference field,
 then the annotated reference field will will be traversed in the inverse direction.

 <p>
 Cascade names must be non-empty.

 <p>
 For non-reference fields this property must be equal to its default value.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>inverse cascade names for the annotated reference field</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../PermazenObject.html#copyTo(io.permazen.PermazenTransaction,int,io.permazen.CopyState,java.lang.String...)"><code>PermazenObject.copyTo()</code></a></li>
<li><a href="../PermazenTransaction.html#cascade(io.permazen.core.ObjId,int,io.permazen.core.util.ObjIdSet,java.lang.String...)"><code>PermazenTransaction.cascade()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="inverseDelete()">
<h3>inverseDelete</h3>
<div class="member-signature"><span class="return-type"><a href="../core/DeleteAction.html" title="enum class in io.permazen.core">DeleteAction</a></span>&nbsp;<span class="element-name">inverseDelete</span></div>
<div class="block">For reference fields, configure the behavior when the referred-to object is
 <a href="../PermazenObject.html#delete()">deleted</a>.

 <p>
 For non-reference fields this property must be equal to its default value.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>desired behavior when a referenced object is deleted</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#forwardDelete()"><code>forwardDelete()</code></a></li>
<li><a href="../PermazenObject.html#delete()"><code>PermazenObject.delete()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>EXCEPTION</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forwardDelete()">
<h3>forwardDelete</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">forwardDelete</span></div>
<div class="block">For reference fields, configure cascading behavior when the referring object is
 <a href="../PermazenObject.html#delete()">deleted</a>. If set to true, the referred-to object
 is automatically deleted as well.

 <p>
 For non-reference fields this property must be equal to its default value.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>whether deletion should automatically propagate to the referred-to object</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#inverseDelete()"><code>inverseDelete()</code></a></li>
<li><a href="../PermazenObject.html#delete()"><code>PermazenObject.delete()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unique()">
<h3>unique</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">unique</span></div>
<div class="block">Require this field's value to be unique among all database objects.

 <p>
 This property creates an implicit uniqueness validation constraint.

 <p>
 The constraint will be checked any time normal validation is performed on an object containing the field.
 More precisely, a uniqueness constraint behaves like a JSR 303
 validation constraint with <code>groups() = </code><code>{ </code><code>Default</code><code>.class,
 </code><a href="../UniquenessConstraints.html" title="interface in io.permazen"><code>UniquenessConstraints</code></a><code>.class</code><code> }</code>. Therefore, uniqueness constraints
 are included in default validation, but you can also validate <i>only</i> uniqueness constraints via
 <a href="../PermazenObject.html#revalidate(java.lang.Class...)"><code>myobj.revalidate(UniquenessConstraints.class)</code></a>.

 <p>
 This property must be false for sub-fields of complex fields, and for any field that is not indexed.

 <p>
 For reference fields, a uniqueness constraint enforces a one-to-one relationship.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>whether the field's value should be unique</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#uniqueExcludes()"><code>uniqueExcludes()</code></a></li>
<li><a href="../UniquenessConstraints.html" title="interface in io.permazen"><code>UniquenessConstraints</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="uniqueExcludes()">
<h3>uniqueExcludes</h3>
<div class="member-signature"><span class="return-type"><a href="Values.html" title="annotation interface in io.permazen.annotation">Values</a></span>&nbsp;<span class="element-name">uniqueExcludes</span></div>
<div class="block">Specify field value(s) that should be excluded from the uniqueness constraint.

 <p>
 Examples:
 <pre>
  // Exclude objects with null names from the uniqueness constraint
  &#64;PermazenField(indexed = true, <b>unique = true, uniqueExcludes = &#64;Values(nulls = true))</b>
  public abstract String getName();

  // Exclude objects with non-finite priorities from the uniqueness constraint
  &#64;PermazenField(indexed = true, <b>unique = true, uniqueExcludes = &#64;Values({ "Infinity", "-Infinity", "NaN" })</b>)
  public abstract float getPriority();
 </pre>

 <p>
 Use of <a href="Values.html" title="annotation interface in io.permazen.annotation"><code>&#64;Values</code></a><code>(nonNulls = true)</code> would be somewhat unusual; that would mean there can be
 at most one object with a null value in the field, but otherwise there are no restrictions. Specifying both
 <a href="Values.html#nulls()"><code>nulls()</code></a> and <a href="Values.html#nonNulls()"><code>nonNulls()</code></a> generates an error, as that would exclude
 every object from the constraint, rendering it pointless.

 <p>
 This property must be left empty when <a href="#unique()"><code>unique()</code></a> is false.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>field values to be excluded from the uniqueness constraint</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#unique()"><code>unique()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>@io.permazen.annotation.Values</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="allowDeleted()">
<h3>allowDeleted</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">allowDeleted</span></div>
<div class="block">Allow the field to reference non-existent objects in normal transactions.

 <p>
 For non-reference fields, this property must be equal to its default value.

 <p>
 Otherwise, if this property is set to false, the field is disallowed from ever referring to a non-existent object;
 instead, a <a href="../core/DeletedObjectException.html" title="class in io.permazen.core"><code>DeletedObjectException</code></a> will be thrown. When used together with
 <a href="../core/DeleteAction.html#EXCEPTION"><code>DeleteAction.EXCEPTION</code></a> (see <a href="#inverseDelete()"><code>inverseDelete()</code></a>), the field is guaranteed to never be a dangling reference.

 <p>
 This property only applies to regular (non-detached) transactions.

 <p>
 For consistency, this property must be set to true when <a href="#inverseDelete()"><code>inverseDelete()</code></a> is set to <a href="../core/DeleteAction.html#IGNORE"><code>DeleteAction.IGNORE</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>whether the reference field should allow assignment to deleted objects in normal transactions</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#inverseDelete()"><code>inverseDelete()</code></a></li>
<li><a href="PermazenType.html#autogenAllowDeleted()"><code>PermazenType.autogenAllowDeleted()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="upgradeConversion()">
<h3>upgradeConversion</h3>
<div class="member-signature"><span class="return-type"><a href="../UpgradeConversionPolicy.html" title="enum class in io.permazen">UpgradeConversionPolicy</a></span>&nbsp;<span class="element-name">upgradeConversion</span></div>
<div class="block">Specify the <a href="../UpgradeConversionPolicy.html" title="enum class in io.permazen"><code>UpgradeConversionPolicy</code></a> policy to apply when this field's type has changed due to a schema change.

 <p>
 Permazen supports schema changes that alter a field's type, and in some cases can automatically convert field values
 from the old to the new type (for example, from the <code>int</code> value <code>1234</code> to the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a> value
 <code>"1234"</code>).

 <p>
 See <a href="../encoding/Encoding.html#convert(io.permazen.encoding.Encoding,S)"><code>Encoding.convert()</code></a> for details about conversions between field encodings.
 In addition, <a href="../Counter.html" title="class in io.permazen"><code>Counter</code></a> fields may be automatically converted to/from any numeric Java primitive
 (or primitive wrapper) type.

 <p>
 This property defines the <a href="../UpgradeConversionPolicy.html" title="enum class in io.permazen"><code>UpgradeConversionPolicy</code></a> for the annotated field when upgrading an object from some
 other schema to the current schema.

 <p>
 Automatic upgrade conversion is only supported for plain simple fields. For sub-fields of complex fields,
 this property is ignored.

 <p>
 Note that arbitrary conversion logic is always possible using <a href="OnSchemaChange.html" title="annotation interface in io.permazen.annotation"><code>&#64;OnSchemaChange</code></a> methods.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>upgrade conversion policy for this field</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../UpgradeConversionPolicy.html" title="enum class in io.permazen"><code>UpgradeConversionPolicy</code></a></li>
<li><a href="../encoding/Encoding.html#convert(io.permazen.encoding.Encoding,S)"><code>Encoding.convert()</code></a></li>
<li><a href="OnSchemaChange.html" title="annotation interface in io.permazen.annotation"><code>OnSchemaChange</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>ATTEMPT</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
