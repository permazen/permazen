<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>io.permazen.spring (Permazen 4.1.9-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="io.permazen.spring (Permazen 4.1.9-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../io/permazen/schema/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../io/permazen/test/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?io/permazen/spring/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;io.permazen.spring</h1>
<div class="docSummary">
<div class="block">Spring Framework integration classes.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../io/permazen/spring/AnnotatedClassScanner.html" title="class in io.permazen.spring">AnnotatedClassScanner</a></td>
<td class="colLast">
<div class="block">Scans the classpath for classes having one or more configured type annotations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../io/permazen/spring/JObjectHttpMessageConverter.html" title="class in io.permazen.spring">JObjectHttpMessageConverter</a></td>
<td class="colLast">
<div class="block">Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html?is-external=true" title="class or interface in org.springframework.http.converter"><code>HttpMessageConverter</code></a> capable of
 encoding and decoding one or more <a href="../../../io/permazen/JObject.html" title="interface in io.permazen"><code>JObject</code></a>s contained in a <a href="../../../io/permazen/SnapshotJTransaction.html" title="class in io.permazen"><code>SnapshotJTransaction</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../io/permazen/spring/KVStoreHttpMessageConverter.html" title="class in io.permazen.spring">KVStoreHttpMessageConverter</a></td>
<td class="colLast">
<div class="block">Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html?is-external=true" title="class or interface in org.springframework.http.converter"><code>HttpMessageConverter</code></a>
 capable of encoding and decoding a <a href="../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv"><code>KVStore</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../io/permazen/spring/OpenTransactionInViewFilter.html" title="class in io.permazen.spring">OpenTransactionInViewFilter</a></td>
<td class="colLast">
<div class="block">A servlet <code>Filter</code> binds a <a href="../../../io/permazen/Permazen.html" title="class in io.permazen"><code>Permazen</code></a> <a href="../../../io/permazen/JTransaction.html" title="class in io.permazen"><code>JTransaction</code></a> to the current thread
 for the entire processing of the request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../io/permazen/spring/PermazenClassScanner.html" title="class in io.permazen.spring">PermazenClassScanner</a></td>
<td class="colLast">
<div class="block">Scans the classpath for types annotated as <a href="../../../io/permazen/annotation/PermazenType.html" title="annotation in io.permazen.annotation"><code>&#64;PermazenType</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../io/permazen/spring/PermazenExceptionTranslator.html" title="class in io.permazen.spring">PermazenExceptionTranslator</a></td>
<td class="colLast">
<div class="block">Permazen implementation of Spring's <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/dao/support/PersistenceExceptionTranslator.html?is-external=true" title="class or interface in org.springframework.dao.support"><code>PersistenceExceptionTranslator</code></a> interface.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../io/permazen/spring/PermazenFieldTypeScanner.html" title="class in io.permazen.spring">PermazenFieldTypeScanner</a></td>
<td class="colLast">
<div class="block">Scans the classpath for types annotated as <a href="../../../io/permazen/annotation/JFieldType.html" title="annotation in io.permazen.annotation"><code>&#64;JFieldType</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../io/permazen/spring/PermazenNamespaceHandler.html" title="class in io.permazen.spring">PermazenNamespaceHandler</a></td>
<td class="colLast">
<div class="block">Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/beans/factory/xml/NamespaceHandler.html?is-external=true" title="class or interface in org.springframework.beans.factory.xml"><code>NamespaceHandler</code></a>
 for the <code>permazen</code> XML namespace.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../io/permazen/spring/PermazenTransactionManager.html" title="class in io.permazen.spring">PermazenTransactionManager</a></td>
<td class="colLast">
<div class="block">Permazen implementation of Spring's
 <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/transaction/PlatformTransactionManager.html?is-external=true" title="class or interface in org.springframework.transaction"><code>PlatformTransactionManager</code></a> interface,
 allowing methods annotated with Spring's <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/transaction/annotation/Transactional.html?is-external=true" title="class or interface in org.springframework.transaction.annotation"><code>&#64;Transactional</code></a>
 annotation to perform transactions on a <a href="../../../io/permazen/Permazen.html" title="class in io.permazen"><code>Permazen</code></a> database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../io/permazen/spring/PermazenTransactionManager.TransactionSynchronizationCallback.html" title="class in io.permazen.spring">PermazenTransactionManager.TransactionSynchronizationCallback</a></td>
<td class="colLast">
<div class="block">Adapter class that wraps a Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/transaction/support/TransactionSynchronization.html?is-external=true" title="class or interface in org.springframework.transaction.support"><code>TransactionSynchronization</code></a> in the
 <a href="../../../io/permazen/core/Transaction.Callback.html" title="interface in io.permazen.core"><code>Transaction.Callback</code></a> interface.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../io/permazen/spring/SnapshotJTransactionHttpMessageConverter.html" title="class in io.permazen.spring">SnapshotJTransactionHttpMessageConverter</a></td>
<td class="colLast">
<div class="block">Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html?is-external=true" title="class or interface in org.springframework.http.converter"><code>HttpMessageConverter</code></a> capable of
 encoding and decoding a graph of <a href="../../../io/permazen/JObject.html" title="interface in io.permazen"><code>JObject</code></a>s contained in a <a href="../../../io/permazen/SnapshotJTransaction.html" title="class in io.permazen"><code>SnapshotJTransaction</code></a> that is
 backed by a <a href="../../../io/permazen/kv/util/NavigableMapKVStore.html" title="class in io.permazen.kv.util"><code>NavigableMapKVStore</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../io/permazen/spring/SpringXMLKVDatabase.html" title="class in io.permazen.spring">SpringXMLKVDatabase</a></td>
<td class="colLast">
<div class="block"><a href="../../../io/permazen/kv/simple/XMLKVDatabase.html" title="class in io.permazen.kv.simple"><code>XMLKVDatabase</code></a> that adds support for loading the default initial content from any Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io"><code>Resource</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package io.permazen.spring Description">Package io.permazen.spring Description</h2>
<div class="block">Spring Framework integration classes.

 <p><b>Overview</b></p>

 <p>
 This package provides the following features to facilitate use with
 <a href="http://projects.spring.io/spring-framework/">Spring</a>:
 <ul>
  <li>Custom XML tags for Spring declarative XML (see below)</li>
  <li>A Spring <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/transaction/PlatformTransactionManager.html?is-external=true" title="class or interface in org.springframework.transaction"><code>PlatformTransactionManager</code></a> that integrates
      into Spring's transaction infrastructure and enables the
      <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/transaction/annotation/Transactional.html?is-external=true" title="class or interface in org.springframework.transaction.annotation"><code>&#64;Transactional</code></a> annotation for
      <a href="../../../io/permazen/Permazen.html" title="class in io.permazen"><code>Permazen</code></a> transactions.</li>
  <li>A <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/dao/support/PersistenceExceptionTranslator.html?is-external=true" title="class or interface in org.springframework.dao.support"><code>PersistenceExceptionTranslator</code></a>
      <a href="../../../io/permazen/spring/PermazenExceptionTranslator.html" title="class in io.permazen.spring">implementation</a> suitable for use with Permazen</li>
  <li><a href="../../../io/permazen/spring/OpenTransactionInViewFilter.html" title="class in io.permazen.spring"><code>OpenTransactionInViewFilter</code></a>, which allows <a href="../../../io/permazen/Permazen.html" title="class in io.permazen"><code>Permazen</code></a>
      transactions to span an entire web request.</li>
  <li>Various <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html?is-external=true" title="class or interface in org.springframework.http.converter"><code>HttpMessageConverter</code></a>'s that bring Permazen's encoding,
      indexing, and schema management features to data being sent over a network:
      <ul>
      <li><a href="../../../io/permazen/spring/KVStoreHttpMessageConverter.html" title="class in io.permazen.spring"><code>KVStoreHttpMessageConverter</code></a> for encoding/decoding a raw
          <a href="../../../io/permazen/kv/KVStore.html" title="interface in io.permazen.kv"><code>KVStore</code></a></li>
      <li><a href="../../../io/permazen/spring/SnapshotJTransactionHttpMessageConverter.html" title="class in io.permazen.spring"><code>SnapshotJTransactionHttpMessageConverter</code></a> for encoding/decoding an entire
          <a href="../../../io/permazen/SnapshotJTransaction.html" title="class in io.permazen"><code>SnapshotJTransaction</code></a></li>
      <li><a href="../../../io/permazen/spring/JObjectHttpMessageConverter.html" title="class in io.permazen.spring"><code>JObjectHttpMessageConverter</code></a> for encoding/decoding a specific
          <a href="../../../io/permazen/JObject.html" title="interface in io.permazen"><code>JObject</code></a> within a <a href="../../../io/permazen/SnapshotJTransaction.html" title="class in io.permazen"><code>SnapshotJTransaction</code></a></li>
      </ul>
  </li>
 </ul>

 <p><b>Permazen XML Tags</b></p>

 <p>
 Permazen makes available the following XML tags to Spring declarative XML. All elements live in the
 <code>http://permazen.io/schema/spring/permazen</code> XML namespace:

 <div style="margin-left: 20px;">
 <table border="1" cellpadding="3" cellspacing="0" summary="Supported Elements">
 <tr style="bgcolor:#ccffcc">
  <th align="left">Element</th>
  <th align="left">Description</th>
 </tr>
 <tr>
  <td><code>&lt;permazen:scan-classes&gt;</code></td>
  <td>Works just like Spring's <code>&lt;context:component-scan&gt;</code> but finds
      <a href="../../../io/permazen/annotation/PermazenType.html" title="annotation in io.permazen.annotation"><code>&#64;PermazenType</code></a>-annotated Java model classes.
      Returns the classes found in a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>.</td>
 </tr>
 <tr>
  <td><code>&lt;permazen:scan-field-types&gt;</code></td>
  <td>Works just like Spring's <code>&lt;context:component-scan&gt;</code> but finds
      <a href="../../../io/permazen/annotation/JFieldType.html" title="annotation in io.permazen.annotation"><code>&#64;JFieldType</code></a>-annotated custom <a href="../../../io/permazen/core/FieldType.html" title="class in io.permazen.core"><code>FieldType</code></a> classes.
      Returns the classes found in a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util"><code>List</code></a>.</td>
 </tr>
 <tr>
  <td><code>&lt;permazen:permazen&gt;</code></td>
  <td>Simplifies defining and configuring a <a href="../../../io/permazen/Permazen.html" title="class in io.permazen"><code>Permazen</code></a> database.</td>
 </tr>
 </table>
 </div>

 <p>
 The <code>&lt;permazen:permazen&gt;</code> element requires a nested <code>&lt;permazen:scan-classes&gt;</code> element to configure
 the Java model classes. A nested <code>&lt;permazen:scan-field-types&gt;</code> may also be included.
 The <code>&lt;permazen:permazen&gt;</code> element supports the following attributes:

 <div style="margin-left: 20px;">
 <table border="1" cellpadding="3" cellspacing="0" summary="Supported Attributes">
 <tr style="bgcolor:#ccffcc">
  <th align="left">Attribute</th>
  <th align="left">Type</th>
  <th align="left">Required?</th>
  <th align="left">Description</th>
 </tr>
 <tr>
  <td><code>kvstore</code></td>
  <td>Bean reference</td>
  <td>No</td>
  <td>The underlying key/value store database. This should be the name of a Spring bean that implements
      the <a href="../../../io/permazen/kv/KVDatabase.html" title="interface in io.permazen.kv"><code>KVDatabase</code></a> interface. If unset, defaults to a new
      <a href="../../../io/permazen/kv/simple/SimpleKVDatabase.html" title="class in io.permazen.kv.simple"><code>SimpleKVDatabase</code></a> instance.</td>
 </tr>
 <tr>
  <td><code>schema-version</code></td>
  <td>Integer</td>
  <td>No</td>
  <td>The schema version corresponding to the configured Java model classes. A value of zero means to use
      whatever is the highest schema version already recorded in the database. A value of -1 (the default)
      means to <a href="../../../io/permazen/schema/SchemaModel.html#autogenerateVersion--">auto-generate</a> a version number
      based on the <a href="../../../io/permazen/schema/SchemaModel.html#compatibilityHash--">compatibility hash</a> of the
      <a href="../../../io/permazen/schema/SchemaModel.html" title="class in io.permazen.schema"><code>SchemaModel</code></a> generated from the Java model classes.</td>
 </tr>
 <tr>
  <td><code>storage-id-generator</code></td>
  <td>Bean reference</td>
  <td>No</td>
  <td>To use a custom <a href="../../../io/permazen/StorageIdGenerator.html" title="interface in io.permazen"><code>StorageIdGenerator</code></a>, specify the name of a Spring bean that
      implements the <a href="../../../io/permazen/StorageIdGenerator.html" title="interface in io.permazen"><code>StorageIdGenerator</code></a> interface. By default, a
      <a href="../../../io/permazen/DefaultStorageIdGenerator.html" title="class in io.permazen"><code>DefaultStorageIdGenerator</code></a> is used. If this attribute is set, then
      <code>auto-generate-storage-ids</code> must not be set to false.</td>
 </tr>
 <tr>
  <td><code>auto-generate-storage-ids</code></td>
  <td>Boolean</td>
  <td>No</td>
  <td>Whether to auto-generate storage ID's. Default is true</td>
 </tr>
 </table>
 </div>

 <p>
 An example Spring XML configuration using an in-memory key/value store and supporting Spring's
 <a href="https://docs.spring.io/spring-framework/docs/5.3.14/javadoc-api/org/springframework/transaction/annotation/Transactional.html?is-external=true" title="class or interface in org.springframework.transaction.annotation"><code>&#64;Transactional</code></a> annotation:
 <pre>
 &lt;beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   <b>xmlns:permazen="http://permazen.io/schema/spring/permazen"</b>
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:c="http://www.springframework.org/schema/c"
   xsi:schemaLocation="
      <b>http://permazen.io/schema/spring/permazen
        http://permazen.github.io/permazen/permazen-spring/src/main/resources/io/permazen/spring/permazen-1.0.xsd</b>
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd"&gt;

     &lt;!-- Define the underlying key/value database --&gt;
     &lt;bean id="kvdb" class="io.permazen.kv.simple.SimpleKVDatabase" p:waitTimeout="5000" p:holdTimeout="10000"/&gt;

     &lt;!-- Define the Permazen database on top of that --&gt;
     &lt;<b>permazen:permazen</b> id="permazen" kvstore="kvdb"&gt;

         &lt;!-- These are our Java model classes --&gt;
         &lt;<b>permazen:scan-classes</b> base-package="com.example.myapp"&gt;
             &lt;<b>permazen:exclude-filter</b> type="regex" expression="com\.example\.myapp\.test\..*"/&gt;
         &lt;/<b>permazen:scan-classes</b>&gt;

         &lt;!-- We have some custom FieldType's here too --&gt;
         &lt;<b>permazen:scan-field-types</b> base-package="com.example.myapp.fieldtype"/&gt;
     &lt;/<b>permazen:permazen</b>&gt;

     &lt;!-- Create a Permazen transaction manager --&gt;
     &lt;bean id="transactionManager" class="io.permazen.spring.PermazenTransactionManager"
       p:Permazen-ref="permazen" p:allowNewSchema="true"/&gt;

     &lt;!-- Enable @Transactional annotations --&gt;
     &lt;tx:annotation-driven transaction-manager="transactionManager"/&gt;

 &lt;/beans&gt;
 </pre></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://projects.spring.io/spring-framework/">Spring Framework</a></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../io/permazen/schema/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../io/permazen/test/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?io/permazen/spring/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2022. All rights reserved.</small></p>
</body>
</html>
