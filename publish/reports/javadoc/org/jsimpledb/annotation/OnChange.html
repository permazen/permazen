<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>OnChange (Java Class Library API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OnChange (Java Class Library API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OnChange.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jsimpledb/annotation/JSimpleClass.html" title="annotation in org.jsimpledb.annotation"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jsimpledb/annotation/OnCreate.html" title="annotation in org.jsimpledb.annotation"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jsimpledb/annotation/OnChange.html" target="_top">Frames</a></li>
<li><a href="OnChange.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jsimpledb.annotation</div>
<h2 title="Annotation Type OnChange" class="title">Annotation Type OnChange</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Target.html?is-external=true#value()" title="class or interface in java.lang.annotation">value</a>=<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/ElementType.html?is-external=true#METHOD" title="class or interface in java.lang.annotation">METHOD</a>)
<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Documented.html?is-external=true" title="class or interface in java.lang.annotation">@Documented</a>
public @interface <a href="../../../src-html/org/jsimpledb/annotation/OnChange.html#line.105">OnChange</a></pre>
<div class="block">Annotation for methods that are to be invoked whenever a target field in some target object changes during a transaction,
 where the target object containing the changed field is found at the end of a path of references
 starting from the object to be notified.
 See <a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a> for more information about reference paths.

 <p><b>Method Parameter Types</b></p>

 <p>
 In all cases the annotated method must return void and take a single parameter, which is compatible with one or more
 of the <a href="../../../org/jsimpledb/change/FieldChange.html" title="class in org.jsimpledb.change"><code>FieldChange</code></a> sub-types appropriate for the field being watched.
 The method may have any level of access, including <code>private</code>.
 The method parameter type can be used to restrict which notifications are delivered. For example, an annotated method
 taking a <a href="../../../org/jsimpledb/change/SetFieldChange.html" title="class in org.jsimpledb.change"><code>SetFieldChange</code></a> will receive notifications about all changes to a set field,
 while a method taking a <a href="../../../org/jsimpledb/change/SetFieldAdd.html" title="class in org.jsimpledb.change"><code>SetFieldAdd</code></a> will receive notification only when an element
 is added to the set.
 </p>

 <p>
 Multiple reference paths may be specified; if so, all of the specified paths are monitored together, and they all
 must emit <a href="../../../org/jsimpledb/change/FieldChange.html" title="class in org.jsimpledb.change"><code>FieldChange</code></a>s compatible with the method's parameter type. Therefore, when
 mutiple fields are monitored, the method's parameter type may need to be widened (either in raw type, generic type
 parameters, or both).
 </p>

 <p>
 As a special case, if zero fields are specified, then "wildcard" monitoring of every field in the local object occurs.
 However in this case, only fields that emit changes compatible with the method's parameter type will be monitored.
 So for example, a method taking a <a href="../../../org/jsimpledb/change/SetFieldChange.html" title="class in org.jsimpledb.change"><code>SetFieldChange</code></a> would receive notifications about
 changes to all <code>Set</code> fields in the class, but not any other fields.
 </p>

 <p><b>Instance vs. Static Methods</b></p>

 <p>
 If the method is an instance method, then <a href="../../../org/jsimpledb/annotation/OnChange.html#startType()"><code>startType()</code></a> must be left unset; if the instance is a static
 method, then <a href="../../../org/jsimpledb/annotation/OnChange.html#startType()"><code>startType()</code></a> may be explicitly set, or if left unset it defaults to the class containing
 the annotated method.
 </p>

 <p>
 For an instance method, the method will be invoked on <i>each object</i> for which the changed field is
 found at the end of the specified reference path <i>starting from that object</i>.
 </p>

 <p>
 If the annotated method is a static method, the method is invoked <i>once</i> if any instance exists for which the
 changed field is found at the end of the specified reference path, no matter how many such instances there are.
 Otherwise the behavior is the same.
 </p>

 <p><b>Notification Delivery</b></p>

 <p>
 Notifications are delivered synchronously within the thread the made the change, after the change is made and just
 prior to returning to the original caller.
 Additional changes made within an <a href="../../../org/jsimpledb/annotation/OnChange.html" title="annotation in org.jsimpledb.annotation"><code>&#64;OnChange</code></a> handler that themselves result in notifications
 are also handled prior to returning to the original caller. Therefore, infinite loops are possible if an
 <a href="../../../org/jsimpledb/annotation/OnChange.html" title="annotation in org.jsimpledb.annotation"><code>&#64;OnChange</code></a> handler method modifies the field it's monitoring (directly, or indirectly via
 other <a href="../../../org/jsimpledb/annotation/OnChange.html" title="annotation in org.jsimpledb.annotation"><code>&#64;OnChange</code></a> handler methods).
 </p>

 <p>
 <a href="../../../org/jsimpledb/annotation/OnChange.html" title="annotation in org.jsimpledb.annotation"><code>&#64;OnChange</code></a> functions within a single transaction; it does not notify about changes that
 may have occurred in a different transaction.
 </p>

 <p><b>Other Notes</b></p>

 <p>
 No notifications are delivered for "changes" that do not actually change anything (e.g., setting a simple field to
 the value already contained in that field, or adding an element to a set which is already contained in the set).
 </p>

 <p>
 For any given field change and path, only one notification will be delivered per recipient object, even if the changed field
 is seen through the path in multiple ways (e.g., via reference path <code>"mylist.element.myfield"</code> where the changed object
 containing <code>myfield</code> appears multiple times in <code>mylist</code>).
 </p>

 <p>
 See <a href="../../../org/jsimpledb/core/Transaction.html#addSimpleFieldChangeListener(int, int[], java.lang.Iterable, org.jsimpledb.core.SimpleFieldChangeListener)"><code>Transaction.addSimpleFieldChangeListener()</code></a>
 for further information on other special corner cases.
 </p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a>, 
<a href="../../../org/jsimpledb/change/package-summary.html"><code>org.jsimpledb.change</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_optional_element_summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jsimpledb/annotation/OnChange.html#snapshotTransactions()">snapshotTransactions</a></strong></code>
<div class="block">Determines whether this annotation should also be enabled for
 <a href="../../../org/jsimpledb/SnapshotJTransaction.html" title="class in org.jsimpledb">snapshot transaction</a> objects.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/jsimpledb/annotation/OnChange.html#startType()">startType</a></strong></code>
<div class="block">Specifies the starting type for the <a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a> specified by <a href="../../../org/jsimpledb/annotation/OnChange.html#value()"><code>value()</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/jsimpledb/annotation/OnChange.html#value()">value</a></strong></code>
<div class="block">Specifies the path to the target field to watch for changes.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_element_detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="value()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>value</h4>
<pre>public abstract&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;<a href="../../../src-html/org/jsimpledb/annotation/OnChange.html#line.121">value</a></pre>
<div class="block">Specifies the path to the target field to watch for changes.
 See <a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a> for information on the proper syntax.

 <p>
 Multiple paths may be specified; if so, each path is handled as a separate independent listener registration,
 and the method's parameter type must be compatible with at least one of the <a href="../../../org/jsimpledb/change/FieldChange.html" title="class in org.jsimpledb.change"><code>FieldChange</code></a>
 sub-types emitted by each field. If zero paths are specified, every field in the class (including superclasses)
 that emits <a href="../../../org/jsimpledb/change/FieldChange.html" title="class in org.jsimpledb.change"><code>FieldChange</code></a>s compatible with the method parameter will be monitored for changes.
 </p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>reference path leading to the changed field</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a></dd></dl>
<dl>
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</li>
</ul>
<a name="startType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startType</h4>
<pre>public abstract&nbsp;<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;&nbsp;<a href="../../../src-html/org/jsimpledb/annotation/OnChange.html#line.134">startType</a></pre>
<div class="block">Specifies the starting type for the <a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a> specified by <a href="../../../org/jsimpledb/annotation/OnChange.html#value()"><code>value()</code></a>.

 <p>
 This property must be left unset for instance methods. For static methods, if this property is left unset,
 then then class containing the annotated method is assumed.
 </p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Java type at which the reference path starts</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/jsimpledb/ReferencePath.html" title="class in org.jsimpledb"><code>ReferencePath</code></a></dd></dl>
<dl>
<dt>Default:</dt>
<dd>void.class</dd>
</dl>
</li>
</ul>
<a name="snapshotTransactions()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>snapshotTransactions</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../../../src-html/org/jsimpledb/annotation/OnChange.html#line.144">snapshotTransactions</a></pre>
<div class="block">Determines whether this annotation should also be enabled for
 <a href="../../../org/jsimpledb/SnapshotJTransaction.html" title="class in org.jsimpledb">snapshot transaction</a> objects.
 If unset, notifications will only be delivered to non-snapshot (i.e., normal) database instances.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>whether enabled for snapshot transactions</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/jsimpledb/SnapshotJTransaction.html" title="class in org.jsimpledb"><code>SnapshotJTransaction</code></a></dd></dl>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OnChange.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jsimpledb/annotation/JSimpleClass.html" title="annotation in org.jsimpledb.annotation"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jsimpledb/annotation/OnCreate.html" title="annotation in org.jsimpledb.annotation"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jsimpledb/annotation/OnChange.html" target="_top">Frames</a></li>
<li><a href="OnChange.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
